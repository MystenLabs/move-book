<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Storage Functions - The Move Book</title>


        <!-- Custom HTML head -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300&display=swap" rel="stylesheet">
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-B1E7R0BHX4"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-B1E7R0BHX4');
        </script>

        <meta name="description" content="First book about the Move programming language and the Move VM. Move documentation, Move tutorials and language reference.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/css/custom.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> The Move Book</a></li><li class="chapter-item expanded "><a href="../foreword.html"><strong aria-hidden="true">2.</strong> Foreword</a></li><li class="chapter-item expanded "><a href="../before-we-begin/index.html"><strong aria-hidden="true">3.</strong> Before we begin</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../before-we-begin/install-sui.html"><strong aria-hidden="true">3.1.</strong> Install Sui</a></li><li class="chapter-item expanded "><a href="../before-we-begin/ide-support.html"><strong aria-hidden="true">3.2.</strong> Set up your IDE</a></li><li class="chapter-item expanded "><a href="../before-we-begin/move-2024.html"><strong aria-hidden="true">3.3.</strong> Move 2024</a></li></ol></li><li class="chapter-item expanded "><a href="../your-first-move/hello-world.html"><strong aria-hidden="true">4.</strong> Hello, World!</a></li><li class="chapter-item expanded "><a href="../your-first-move/hello-sui.html"><strong aria-hidden="true">5.</strong> Hello, Sui!</a></li><li class="chapter-item expanded "><a href="../concepts/index.html"><strong aria-hidden="true">6.</strong> Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../concepts/packages.html"><strong aria-hidden="true">6.1.</strong> Package</a></li><li class="chapter-item expanded "><a href="../concepts/manifest.html"><strong aria-hidden="true">6.2.</strong> Manifest</a></li><li class="chapter-item expanded "><a href="../concepts/address.html"><strong aria-hidden="true">6.3.</strong> Address</a></li><li class="chapter-item expanded "><a href="../concepts/what-is-an-account.html"><strong aria-hidden="true">6.4.</strong> Account</a></li><li class="chapter-item expanded "><a href="../concepts/what-is-a-transaction.html"><strong aria-hidden="true">6.5.</strong> Transaction</a></li></ol></li><li class="chapter-item expanded "><a href="../move-basics/index.html"><strong aria-hidden="true">7.</strong> Move Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../move-basics/module.html"><strong aria-hidden="true">7.1.</strong> Module</a></li><li class="chapter-item expanded "><a href="../move-basics/comments.html"><strong aria-hidden="true">7.2.</strong> Comments</a></li><li class="chapter-item expanded "><a href="../move-basics/primitive-types.html"><strong aria-hidden="true">7.3.</strong> Primitive Types</a></li><li class="chapter-item expanded "><a href="../move-basics/address.html"><strong aria-hidden="true">7.4.</strong> Address Type</a></li><li class="chapter-item expanded "><a href="../move-basics/expression.html"><strong aria-hidden="true">7.5.</strong> Expression</a></li><li class="chapter-item expanded "><a href="../move-basics/struct.html"><strong aria-hidden="true">7.6.</strong> Struct</a></li><li class="chapter-item expanded "><a href="../move-basics/abilities-introduction.html"><strong aria-hidden="true">7.7.</strong> Abilities: Introduction</a></li><li class="chapter-item expanded "><a href="../move-basics/drop-ability.html"><strong aria-hidden="true">7.8.</strong> Ability: Drop</a></li><li class="chapter-item expanded "><a href="../move-basics/importing-modules.html"><strong aria-hidden="true">7.9.</strong> Importing Modules</a></li><li class="chapter-item expanded "><a href="../move-basics/standard-library.html"><strong aria-hidden="true">7.10.</strong> Standard Library</a></li><li class="chapter-item expanded "><a href="../move-basics/vector.html"><strong aria-hidden="true">7.11.</strong> Vector</a></li><li class="chapter-item expanded "><a href="../move-basics/option.html"><strong aria-hidden="true">7.12.</strong> Option</a></li><li class="chapter-item expanded "><a href="../move-basics/string.html"><strong aria-hidden="true">7.13.</strong> String</a></li><li class="chapter-item expanded "><a href="../move-basics/control-flow.html"><strong aria-hidden="true">7.14.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="../move-basics/constants.html"><strong aria-hidden="true">7.15.</strong> Constants</a></li><li class="chapter-item expanded "><a href="../move-basics/assert-and-abort.html"><strong aria-hidden="true">7.16.</strong> Aborting Execution</a></li><li class="chapter-item expanded "><a href="../move-basics/function.html"><strong aria-hidden="true">7.17.</strong> Function</a></li><li class="chapter-item expanded "><a href="../move-basics/struct-methods.html"><strong aria-hidden="true">7.18.</strong> Struct Methods</a></li><li class="chapter-item expanded "><a href="../move-basics/visibility.html"><strong aria-hidden="true">7.19.</strong> Visibility Modifiers</a></li><li class="chapter-item expanded "><a href="../move-basics/ownership-and-scope.html"><strong aria-hidden="true">7.20.</strong> Ownership and Scope</a></li><li class="chapter-item expanded "><a href="../move-basics/copy-ability.html"><strong aria-hidden="true">7.21.</strong> Ability: Copy</a></li><li class="chapter-item expanded "><a href="../move-basics/references.html"><strong aria-hidden="true">7.22.</strong> References</a></li><li class="chapter-item expanded "><a href="../move-basics/generics.html"><strong aria-hidden="true">7.23.</strong> Generics</a></li><li class="chapter-item expanded "><a href="../move-basics/type-reflection.html"><strong aria-hidden="true">7.24.</strong> Type Reflection</a></li><li class="chapter-item expanded "><a href="../move-basics/testing.html"><strong aria-hidden="true">7.25.</strong> Testing</a></li></ol></li><li class="chapter-item expanded "><a href="../object/index.html"><strong aria-hidden="true">8.</strong> Object Model</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../object/digital-assets.html"><strong aria-hidden="true">8.1.</strong> Language for Digital Assets</a></li><li class="chapter-item expanded "><a href="../object/evolution-of-move.html"><strong aria-hidden="true">8.2.</strong> Evolution of Move</a></li><li class="chapter-item expanded "><a href="../object/object-model.html"><strong aria-hidden="true">8.3.</strong> What is an Object?</a></li><li class="chapter-item expanded "><a href="../object/ownership.html"><strong aria-hidden="true">8.4.</strong> Ownership</a></li><li class="chapter-item expanded "><a href="../object/fast-path-and-consensus.html"><strong aria-hidden="true">8.5.</strong> Fast Path & Consensus</a></li></ol></li><li class="chapter-item expanded "><a href="../storage/index.html"><strong aria-hidden="true">9.</strong> Using Objects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../storage/key-ability.html"><strong aria-hidden="true">9.1.</strong> Ability: Key</a></li><li class="chapter-item expanded "><a href="../storage/storage-functions.html" class="active"><strong aria-hidden="true">9.2.</strong> Storage Functions</a></li><li class="chapter-item expanded "><a href="../storage/store-ability.html"><strong aria-hidden="true">9.3.</strong> Ability: Store</a></li><li class="chapter-item expanded "><a href="../storage/uid-and-id.html"><strong aria-hidden="true">9.4.</strong> UID and ID</a></li><li class="chapter-item expanded "><a href="../storage/transfer-restrictions.html"><strong aria-hidden="true">9.5.</strong> Restricted and Public Transfer</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.6.</strong> Transfer to Object?</div></li></ol></li><li class="chapter-item expanded "><a href="../programmability/index.html"><strong aria-hidden="true">10.</strong> Advanced Programmability</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programmability/transaction-context.html"><strong aria-hidden="true">10.1.</strong> Transaction Context</a></li><li class="chapter-item expanded "><a href="../programmability/module-initializer.html"><strong aria-hidden="true">10.2.</strong> Module Initializer</a></li><li class="chapter-item expanded "><a href="../programmability/capability.html"><strong aria-hidden="true">10.3.</strong> Pattern: Capability</a></li><li class="chapter-item expanded "><a href="../programmability/epoch-and-time.html"><strong aria-hidden="true">10.4.</strong> Epoch and Time</a></li><li class="chapter-item expanded "><a href="../programmability/collections.html"><strong aria-hidden="true">10.5.</strong> Collections</a></li><li class="chapter-item expanded "><a href="../programmability/dynamic-fields.html"><strong aria-hidden="true">10.6.</strong> Dynamic Fields</a></li><li class="chapter-item expanded "><a href="../programmability/dynamic-object-fields.html"><strong aria-hidden="true">10.7.</strong> Dynamic Object Fields</a></li><li class="chapter-item expanded "><a href="../programmability/dynamic-collections.html"><strong aria-hidden="true">10.8.</strong> Dynamic Collections</a></li><li class="chapter-item expanded "><a href="../programmability/witness-pattern.html"><strong aria-hidden="true">10.9.</strong> Pattern: Witness</a></li><li class="chapter-item expanded "><a href="../programmability/one-time-witness.html"><strong aria-hidden="true">10.10.</strong> One Time Witness</a></li><li class="chapter-item expanded "><a href="../programmability/publisher.html"><strong aria-hidden="true">10.11.</strong> Publisher Authority</a></li><li class="chapter-item expanded "><a href="../programmability/display.html"><strong aria-hidden="true">10.12.</strong> Display</a></li><li class="chapter-item expanded "><a href="../programmability/events.html"><strong aria-hidden="true">10.13.</strong> Events</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.14.</strong> Balance & Coin</div></li><li class="chapter-item expanded "><a href="../programmability/sui-framework.html"><strong aria-hidden="true">10.15.</strong> Sui Framework</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.16.</strong> Pattern: Hot Potato</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.17.</strong> Pattern: Request</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.18.</strong> Pattern: Object Capability</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.19.</strong> Package Upgrades</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.20.</strong> Transaction Blocks</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.21.</strong> Authorization Patterns</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.22.</strong> Cryptography and Hashing</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.23.</strong> Randomness</div></li><li class="chapter-item expanded "><a href="../programmability/bcs.html"><strong aria-hidden="true">10.24.</strong> BCS</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Guides</li><li class="chapter-item expanded "><a href="../guides/2024-migration-guide.html"><strong aria-hidden="true">11.</strong> 2024 Migration Guide</a></li><li class="chapter-item expanded "><a href="../guides/upgradeability-practices.html"><strong aria-hidden="true">12.</strong> Upgradability Practices</a></li><li class="chapter-item expanded "><a href="../guides/building-against-limits.html"><strong aria-hidden="true">13.</strong> Building against Limits</a></li><li class="chapter-item expanded "><a href="../guides/better-error-handling.html"><strong aria-hidden="true">14.</strong> Better error handling</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.</strong> Open-sourcing Libraries</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.</strong> Creating an NFT Collection</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">17.</strong> Tests with Objects</div></li><li class="chapter-item expanded "><a href="../guides/coding-conventions.html"><strong aria-hidden="true">18.</strong> Coding Conventions</a></li><li class="chapter-item expanded affix "><li class="part-title">Appendix</li><li class="chapter-item expanded "><a href="../appendix/glossary.html"><strong aria-hidden="true">19.</strong> A - Glossary</a></li><li class="chapter-item expanded "><a href="../appendix/reserved-addresses.html"><strong aria-hidden="true">20.</strong> B - Reserved Addresses</a></li><li class="chapter-item expanded "><a href="../appendix/publications.html"><strong aria-hidden="true">21.</strong> C - Publications</a></li><li class="chapter-item expanded "><a href="../appendix/contributing.html"><strong aria-hidden="true">22.</strong> D - Contributing</a></li><li class="chapter-item expanded "><a href="../appendix/acknowledgements.html"><strong aria-hidden="true">23.</strong> E - Acknowledgements</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Move Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/MystenLabs/move-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/MystenLabs/move-book/edit/second-edition/src/storage/storage-functions.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="storage-functions"><a class="header" href="#storage-functions">Storage Functions</a></h1>
<p>The module that defines main storage operations is <code>sui::transfer</code>. It is implicitly imported in all
packages that depend on the <a href="./../programmability/sui-framework.html">Sui Framework</a>, so, like other
implicitly imported modules (e.g. <code>std::option</code> or <code>std::vector</code>), it does not require adding a use
statement.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The <code>transfer</code> module provides functions to perform all three storage operations matching
<a href="./../object/ownership.html">ownership types</a> which we explained before:</p>
<blockquote>
<p>On this page we will only talk about so-called <em>restricted</em> storage operations, later we will
cover <em>public</em> ones, after the <code>store</code> ability is introduced.</p>
</blockquote>
<ol>
<li><em>Transfer</em> - send an object to an address, put it into <em>account owned</em> state;</li>
<li><em>Share</em> - put an object into a <em>shared</em> state, so it is available to everyone;</li>
<li><em>Freeze</em> - put an object into <em>immutable</em> state, so it becomes a public constant and can never
change.</li>
</ol>
<p>The <code>transfer</code> module is a go-to for most of the storage operations, except a special case with
<a href="./../programmability/dynamic-fields.html">Dynamic Fields</a> awaits us in the next chapter.</p>
<h2 id="ownership-and-references-a-quick-recap"><a class="header" href="#ownership-and-references-a-quick-recap">Ownership and References: A Quick Recap</a></h2>
<p>In the <a href="./../move-basics/ownership-and-scope.html">Ownership and Scope</a> and
<a href="./../move-basics/references.html">References</a> chapters, we covered the basics of ownership and
references in Move. It is important that you understand these concepts when using storage functions.
Here is a quick recap of the most important points:</p>
<ul>
<li>The <em>move</em> semantics in Move means that the value is <em>moved</em> from one scope to another. In other
words, if an instance of a type is passed to a function <em>by value</em>, it is <em>moved</em> to the function
scope and can't be accessed in the caller scope anymore.</li>
<li>To maintain the ownership of the value, you can pass it <em>by reference</em>. Either by <em>immutable
reference</em> <code>&amp;T</code> or <em>mutable reference</em> <code>&amp;mut T</code>. Then the value is <em>borrowed</em> and can be accessed
in the caller scope, however the owner stays the same.</li>
</ul>
<pre><code class="language-move">/// Moved by value
public fun take&lt;T&gt;(value: T) { /* value is moved here! */ abort 0 }

/// For immutable reference
public fun borrow&lt;T&gt;(value: &amp;T) { /* value is borrowed here! can be read */ abort 0 }

/// For mutable reference
public fun borrow_mut&lt;T&gt;(value: &amp;mut T) { /* value is mutably borrowed here! */ abort 0 }
</code></pre>
<!-- TODO part on:
    - object does not have an associated storage type
    - the same type of object can be stored differently
    - the objects must be specified in the transaction by their ID
 -->
<h2 id="transfer"><a class="header" href="#transfer">Transfer</a></h2>
<p>The <code>transfer::transfer</code> function is a public function used to transfer an object to another
address. Its signature is as follows, only accepts a type with the <a href="./key-ability.html"><code>key</code> ability</a>
and an <a href="./../move-basics/address.html">address</a> of the recipient. Please, note that the object is
passed into the function <em>by value</em>, therefore it is <em>moved</em> to the function scope and then moved to
the recipient address:</p>
<pre><code class="language-move">// File: sui-framework/sources/transfer.move
public fun transfer&lt;T: key&gt;(obj: T, recipient: address);
</code></pre>
<p>In the next example, you can see how it can be used in a module that defines and sends an object to
the transaction sender.</p>
<pre><code class="language-move">module book::transfer_to_sender {

    /// A struct with `key` is an object. The first field is `id: UID`!
    public struct AdminCap has key { id: UID }

    /// Init function is a special function that is called when the module
    /// is published. It is a good place to create application objects.
    fun init(ctx: &amp;mut TxContext) {
        // Create a new `AdminCap` object, in this scope.
        let admin_cap = AdminCap { id: object::new(ctx) };

        // Transfer the object to the transaction sender.
        transfer::transfer(admin_cap, ctx.sender());

        // admin_cap is gone! Can't be accessed anymore.
    }

    /// Transfers the `AdminCap` object to the `recipient`. Thus, the recipient
    /// becomes the owner of the object, and only they can access it.
    public fun transfer_admin_cap(cap: AdminCap, recipient: address) {
        transfer::transfer(cap, recipient);
    }
}
</code></pre>
<p>When the module is published, the <code>init</code> function will get called, and the <code>AdminCap</code> object which
we created there will be <em>transferred</em> to the transaction sender. The <code>ctx.sender()</code> function
returns the sender address for the current transaction.</p>
<p>Once the <code>AdminCap</code> has been transferred to the sender, for example, to <code>0xa11ce</code>, the sender, and
only the sender, will be able to access the object. The object is now <em>account owned</em>.</p>
<blockquote>
<p>Account owned objects are a subject to <em>true ownership</em> - only the account owner can access them.
This is a fundamental concept in the Sui storage model.</p>
</blockquote>
<p>Let's extend the example with a function that uses <code>AdminCap</code> to authorize a mint of a new object
and its transfer to another address:</p>
<pre><code class="language-move">/// Some `Gift` object that the admin can `mint_and_transfer`.
public struct Gift has key { id: UID }

/// Creates a new `Gift` object and transfers it to the `recipient`.
public fun mint_and_transfer(
    _: &amp;AdminCap, recipient: address, ctx: &amp;mut TxContext
) {
    let gift = object::new(ctx);
    transfer::transfer(gift, recipient);
}
</code></pre>
<p>The <code>mint_and_transfer</code> function is a public function that &quot;could&quot; be called by anyone, but it
requires an <code>AdminCap</code> object to be passed as the first argument by reference. Without it, the
function will not be callable. This is a simple way to restrict access to privileged functions
called <em><a href="./../programmability/capability.html">Capability</a></em>. Because the <code>AdminCap</code> object is <em>account
owned</em>, only <code>0xa11ce</code> will be able to call the <code>mint_and_transfer</code> function.</p>
<p>The <code>Gift</code>s sent to recipients will also be <em>account owned</em>, each gift being unique and owned
exclusively by the recipient.</p>
<p>A quick recap:</p>
<ul>
<li><code>transfer</code> function is used to send an object to an address;</li>
<li>The object becomes <em>account owned</em> and can only be accessed by the recipient;</li>
<li>Functions can be gated by requiring an object to be passed as an argument, creating a
<em>capability</em>.</li>
</ul>
<h2 id="freeze"><a class="header" href="#freeze">Freeze</a></h2>
<p>The <code>transfer::freeze</code> function is public function used to put an object into an <em>immutable</em> state.
Once an object is <em>frozen</em>, it can never be changed, and it can be accessed by anyone by immutable
reference.</p>
<p>The function signature is as follows, only accepts a type with the
<a href="./key-ability.html"><code>key</code> ability</a>. Just like all other storage functions, it takes the object <em>by
value</em>:</p>
<pre><code class="language-move">// File: sui-framework/sources/transfer.move
public fun freeze_object&lt;T: key&gt;(obj: T);
</code></pre>
<p>Let's expand on the previous example and add a function that allows the admin to create a <code>Config</code>
object and freeze it:</p>
<pre><code class="language-move">/// Some `Config` object that the admin can `create_and_freeze`.
public struct Config has key {
    id: UID,
    message: String
}

/// Creates a new `Config` object and freezes it.
public fun create_and_freeze(
    _: &amp;AdminCap,
    message: String,
    ctx: &amp;mut TxContext
) {
    let config = Config {
        id: object::new(ctx),
        message
    };

    // Freeze the object so it becomes immutable.
    transfer::freeze_object(config);
}

/// Returns the message from the `Config` object.
/// Can access the object by immutable reference!
public fun message(c: &amp;Config): String { c.message }
</code></pre>
<p>Config is an object that has a <code>message</code> field, and the <code>create_and_freeze</code> function creates a new
<code>Config</code> and freezes it. Once the object is frozen, it can be accessed by anyone by immutable
reference. The <code>message</code> function is a public function that returns the message from the <code>Config</code>
object. Config is now publicly available by its ID, and the message can be read by anyone.</p>
<blockquote>
<p>Function definitions are not connected to the object's state. It is possible to define a function
that takes a mutable reference to an object that is used as frozen. However, it won't be callable
on a frozen object.</p>
</blockquote>
<p>The <code>message</code> function can be called on an immutable <code>Config</code> object, however, two functions below
are not callable on a frozen object:</p>
<pre><code class="language-move">// === Functions below can't be called on a frozen object! ===

/// The function can be defined, but it won't be callable on a frozen object.
/// Only immutable references are allowed.
public fun message_mut(c: &amp;mut Config): &amp;mut String { &amp;mut c.message }

/// Deletes the `Config` object, takes it by value.
/// Can't be called on a frozen object!
public fun delete_config(c: Config) {
    let Config { id, message: _ } = c;
    id.delete()
}
</code></pre>
<p>To summarize:</p>
<ul>
<li><code>freeze_object</code> function is used to put an object into an <em>immutable</em> state;</li>
<li>Once an object is <em>frozen</em>, it can never be changed, deleted or transferred, and it can be
accessed by anyone by immutable reference;</li>
</ul>
<h2 id="owned---frozen"><a class="header" href="#owned---frozen">Owned -&gt; Frozen</a></h2>
<p>Since the <code>transfer::freeze</code> signature accepts any type with the <code>key</code> ability, it can take an
object that was created in the same scope, but it can also take an object that was owned by an
account. This means that the <code>freeze_object</code> function can be used to <em>freeze</em> an object that was
<em>transferred</em> to the sender. For security concerns, we would not want to freeze the <code>AdminCap</code>
object - it would be a security risk to allow access to it to anyone. However, we can freeze the
<code>Gift</code> object that was minted and transferred to the recipient:</p>
<blockquote>
<p>Single Owner -&gt; Immutable conversion is possible!</p>
</blockquote>
<pre><code class="language-move">/// Freezes the `Gift` object so it becomes immutable.
public fun freeze_gift(gift: Gift) {
    transfer::freeze_object(gift);
}
</code></pre>
<h2 id="share"><a class="header" href="#share">Share</a></h2>
<p>The <code>transfer::share</code> function is a public function used to put an object into a <em>shared</em> state.
Once an object is <em>shared</em>, it can be accessed by anyone by a mutable reference (hence, immutable
too). The function signature is as follows, only accepts a type with the
<a href="./key-ability.html"><code>key</code> ability</a>:</p>
<pre><code class="language-move">// File: sui-framework/sources/transfer.move
public fun share_object&lt;T: key&gt;(obj: T);
</code></pre>
<p>Once an object is <em>shared</em>, it is publicly available as a mutable reference.</p>
<h2 id="special-case-shared-object-deletion"><a class="header" href="#special-case-shared-object-deletion">Special Case: Shared Object Deletion</a></h2>
<p>While the shared object can't normally be taken by value, there is one special case where it can -
if the function that takes it deletes the object. This is a special case in the Sui storage model,
and it is used to allow the deletion of shared objects. To show how it works, we will create a
function that creates and shares a Config object and then another one that deletes it:</p>
<pre><code class="language-move">/// Creates a new `Config` object and shares it.
public fun create_and_share(message: String, ctx: &amp;mut TxContext) {
    let config = Config {
        id: object::new(ctx),
        message
    };

    // Share the object so it becomes shared.
    transfer::share_object(config);
}
</code></pre>
<p>The <code>create_and_share</code> function creates a new <code>Config</code> object and shares it. The object is now
publicly available as a mutable reference. Let's create a function that deletes the shared object:</p>
<pre><code class="language-move">/// Deletes the `Config` object, takes it by value.
/// Can be called on a shared object!
public fun delete_config(c: Config) {
    let Config { id, message: _ } = c;
    id.delete()
}
</code></pre>
<p>The <code>delete_config</code> function takes the <code>Config</code> object by value and deletes it, and Sui Verifier
would allow this call. However, if the function returned the <code>Config</code> object back or attempted to
<code>freeze</code> or <code>transfer</code> it, the Sui Verifier would reject the transaction.</p>
<pre><code class="language-move">// Won't work!
public fun transfer_shared(c: Config, to: address) {
    transfer::transfer(c, to);
}
</code></pre>
<p>To summarize:</p>
<ul>
<li><code>share_object</code> function is used to put an object into a <em>shared</em> state;</li>
<li>Once an object is <em>shared</em>, it can be accessed by anyone by a mutable reference;</li>
<li>Shared objects can be deleted, but they can't be transferred or frozen.</li>
</ul>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>Now that you know main features of the <code>transfer</code> module, you can start building more complex
applications on Sui that involve storage operations. In the next chapter, we will cover the
<a href="./store-ability.html">Store Ability</a> which allows storing data inside objects and relaxes transfer
restrictions which we barely touched on here. And after that we will cover the
<a href="./uid-and-id.html">UID and ID</a> types which are the most important types in the Sui storage model.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../storage/key-ability.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../storage/store-ability.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../storage/key-ability.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../storage/store-ability.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/switcher.js"></script>


    </div>
    </body>
</html>
