<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-reference docs-version-current docs-doc-page docs-doc-id-abilities" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Abilities | Reference | The Move Book</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://move-book.com/reference/abilities"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="algolia-site-verification" content="BCA21DA2879818D2"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-reference-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-reference-current"><meta data-rh="true" property="og:title" content="Abilities | Reference | The Move Book"><link data-rh="true" rel="icon" href="/favicon.svg"><link data-rh="true" rel="canonical" href="https://move-book.com/reference/abilities"><link data-rh="true" rel="alternate" href="https://move-book.com/reference/abilities" hreflang="en"><link data-rh="true" rel="alternate" href="https://move-book.com/reference/abilities" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1E7R0BHX4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-B1E7R0BHX4",{anonymize_ip:!0})</script>



<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik:wght@300&amp;amp;display=swap">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/styles.f79f3242.css">
<script src="/assets/js/runtime~main.6e21dea0.js" defer="defer"></script>
<script src="/assets/js/main.9757aefb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_OH5z" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"></a><a class="navbar__item navbar__link" href="/">Move Book</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/reference">Move Reference</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_aspp"><div class="navbar__search searchBarContainer_reza" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_Kpxf" value=""><div class="loadingRing_LRD_ searchBarLoadingRing_lY7z"><div></div><div></div><div></div><div></div></div></div></div><a href="https://github.com/MystenLabs/move-book" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><i class="fab fa-github"></i></a><div class="toggle_MW0i colorModeToggle_RHuM"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><i aria-hidden="true" class="toggleIcon_oIOL lightToggleIcon_SFTY fas fa-moon"></i><i aria-hidden="true" class="toggleIcon_oIOL darkToggleIcon_ekgs fas fa-sun"></i><i aria-hidden="true" class="toggleIcon_oIOL systemToggleIcon_yi_a fas fa-moon"></i></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_wWoK"><div class="docsWrapper_nrtX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_xs6u" type="button"></button><div class="docRoot_XRUv"><aside class="theme-doc-sidebar-container docSidebarContainer_vhZZ"><div class="sidebarViewport_HXJ_"><div class="sidebar_B2tA"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_RelJ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reference/">The Move Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Getting Started</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/modules">1. Modules</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Basic Concepts</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/reference/primitive-types">2. Primitive Types</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/integers">2.1 Integers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/bool">2.2 Bool</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/address">2.3 Address</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/vector">2.4 Vector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/references">2.5 References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/tuples">2.6 Tuples and Unit</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/variables">3. Local Variables and Scopes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/equality">4. Equality</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/reference/abort-and-assert">5. Abort and Assert</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/abort-and-assert/clever-errors">5.1 Clever Errors</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/reference/control-flow">6. Control Flow</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/control-flow/conditionals">6.1 Conditional Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/control-flow/loops">6.2 Loops</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/control-flow/labeled-control-flow">6.3 Labeled Control Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/control-flow/pattern-matching">6.4 Pattern Matching</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/reference/functions">7. Functions</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/functions/macros">7.1 Macros</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/structs">8. Structs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/enums">9. Enums</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/constants">10. Constants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/generics">11. Generics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reference/abilities">12. Abilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/uses">13. Uses and Aliases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Advanced Concepts</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/method-syntax">14. Method Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/index-syntax">15. Index Syntax</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Tooling</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/packages">16. Packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/unit-testing">17. Unit Testing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Reference</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/coding-conventions">18. Coding Conventions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Deprecated</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/friends">19. Friends</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_oT2n"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_LCKf"><div class="docItemContainer_Jixr"><article><div class="tocCollapsible_vYTS theme-doc-toc-mobile tocMobile_QhsY"><button type="button" class="clean-btn tocCollapsibleButton_nB9w">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Abilities</h1></header>
<p>Abilities are a typing feature in Move that control what actions are permissible for values of a
given type. This system grants fine grained control over the &quot;linear&quot; typing behavior of values, as
well as if and how values are used in storage (as defined by the specific deployment of Move, e.g.
the notion of storage for the blockchain). This is implemented by gating access to certain bytecode
instructions so that for a value to be used with the bytecode instruction, it must have the ability
required (if one is required at all—not every instruction is gated by an ability).</p>
<p>For Sui, <span class="inline-code">key</span> is used to signify an <a href="/reference/abilities/object">object</a>. Objects are the basic unit of
storage where each object has a unique, 32-byte ID. <span class="inline-code">store</span> is then used to both indicate what data
can be stored inside of an object, and is also used to indicate what types can be transferred
outside of their defining module.</p>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="the-four-abilities">The Four Abilities<a href="#the-four-abilities" class="hash-link" aria-label="Direct link to The Four Abilities" title="Direct link to The Four Abilities">​</a></h2>
<p>The four abilities are:</p>
<ul>
<li><a href="#copy"><span class="inline-code">copy</span></a>
<ul>
<li>Allows values of types with this ability to be copied.</li>
</ul>
</li>
<li><a href="#drop"><span class="inline-code">drop</span></a>
<ul>
<li>Allows values of types with this ability to be popped/dropped.</li>
</ul>
</li>
<li><a href="#store"><span class="inline-code">store</span></a>
<ul>
<li>Allows values of types with this ability to exist inside a value in storage.</li>
<li>For Sui, <span class="inline-code">store</span> controls what data can be stored inside of an <a href="/reference/abilities/object">object</a>.
<span class="inline-code">store</span> also controls what types can be transferred outside of their defining module.</li>
</ul>
</li>
<li><a href="#key"><span class="inline-code">key</span></a>
<ul>
<li>Allows the type to serve as a &quot;key&quot; for storage. Ostensibly this means the value can be a
top-level value in storage; in other words, it does not need to be contained in another value to
be in storage.</li>
<li>For Sui, <span class="inline-code">key</span> is used to signify an <a href="/reference/abilities/object">object</a>.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="copy"><span class="inline-code">copy</span><a href="#copy" class="hash-link" aria-label="Direct link to copy" title="Direct link to copy">​</a></h3>
<p>The <span class="inline-code">copy</span> ability allows values of types with that ability to be copied. It gates the ability to
copy values out of local variables with the <a href="/reference/variables#move-and-copy"><span class="inline-code">copy</span></a> operator and to copy
values via references with
<a href="/reference/primitive-types/references#reading-and-writing-through-references">dereference <span class="inline-code">*e</span></a>.</p>
<p>If a value has <span class="inline-code">copy</span>, all values contained inside of that value have <span class="inline-code">copy</span>.</p>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="drop"><span class="inline-code">drop</span><a href="#drop" class="hash-link" aria-label="Direct link to drop" title="Direct link to drop">​</a></h3>
<p>The <span class="inline-code">drop</span> ability allows values of types with that ability to be dropped. By dropped, we mean that
value is not transferred and is effectively destroyed as the Move program executes. As such, this
ability gates the ability to ignore values in a multitude of locations, including:</p>
<ul>
<li>not using the value in a local variable or parameter</li>
<li>not using the value in a <a href="/reference/variables#expression-blocks">sequence via <span class="inline-code">;</span></a></li>
<li>overwriting values in variables in <a href="/reference/variables#assignments">assignments</a></li>
<li>overwriting values via references when
<a href="/reference/primitive-types/references#reading-and-writing-through-references">writing <span class="inline-code">*e1 = e2</span></a>.</li>
</ul>
<p>If a value has <span class="inline-code">drop</span>, all values contained inside of that value have <span class="inline-code">drop</span>.</p>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="store"><span class="inline-code">store</span><a href="#store" class="hash-link" aria-label="Direct link to store" title="Direct link to store">​</a></h3>
<p>The <span class="inline-code">store</span> ability allows values of types with this ability to exist inside of a value in storage,
<em>but</em> not necessarily as a top-level value in storage. This is the only ability that does not
directly gate an operation. Instead it gates the existence in storage when used in tandem with
<span class="inline-code">key</span>.</p>
<p>If a value has <span class="inline-code">store</span>, all values contained inside of that value have <span class="inline-code">store</span>.</p>
<p>For Sui, <span class="inline-code">store</span> serves double duty. It controls what values can appear inside of an
<a href="/storage/store-ability">object</a>, and what objects can be
<a href="/reference/abilities/object#transfer-rules">transferred</a> outside of their defining module.</p>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="key"><span class="inline-code">key</span><a href="#key" class="hash-link" aria-label="Direct link to key" title="Direct link to key">​</a></h3>
<p>The <span class="inline-code">key</span> ability allows the type to serve as a key for storage operations as defined by the
deployment of Move. While it is specific per Move instance, it serves to gates all storage
operations, so in order for a type to be used with storage primitives, the type must have the <span class="inline-code">key</span>
ability.</p>
<p>If a value has <span class="inline-code">key</span>, all values contained inside of that value have <span class="inline-code">store</span>. This is the only
ability with this sort of asymmetry.</p>
<p>For Sui, <span class="inline-code">key</span> is used to signify an <a href="/reference/abilities/object">object</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="builtin-types">Builtin Types<a href="#builtin-types" class="hash-link" aria-label="Direct link to Builtin Types" title="Direct link to Builtin Types">​</a></h2>
<p>All primitive, builtin types have <span class="inline-code">copy</span>, <span class="inline-code">drop</span>, and <span class="inline-code">store</span>.</p>
<ul>
<li><span class="inline-code">bool</span>, <span class="inline-code">u8</span>, <span class="inline-code">u16</span>, <span class="inline-code">u32</span>, <span class="inline-code">u64</span>, <span class="inline-code">u128</span>, <span class="inline-code">u256</span>, and <span class="inline-code">address</span> all have <span class="inline-code">copy</span>, <span class="inline-code">drop</span>, and
<span class="inline-code">store</span>.</li>
<li><span class="inline-code">vector&lt;T&gt;</span> may have <span class="inline-code">copy</span>, <span class="inline-code">drop</span>, and <span class="inline-code">store</span> depending on the abilities of <span class="inline-code">T</span>.<!-- -->
<ul>
<li>See <a href="#conditional-abilities-and-generic-types">Conditional Abilities and Generic Types</a> for more
details.</li>
</ul>
</li>
<li>Immutable references <span class="inline-code">&amp;</span> and mutable references <span class="inline-code">&amp;mut</span> both have <span class="inline-code">copy</span> and <span class="inline-code">drop</span>.<!-- -->
<ul>
<li>This refers to copying and dropping the reference itself, not what they refer to.</li>
<li>References cannot appear in global storage, hence they do not have <span class="inline-code">store</span>.</li>
</ul>
</li>
</ul>
<p>Note that none of the primitive types have <span class="inline-code">key</span>, meaning none of them can be used directly with
storage operations.</p>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="annotating-structs-and-enums">Annotating Structs and Enums<a href="#annotating-structs-and-enums" class="hash-link" aria-label="Direct link to Annotating Structs and Enums" title="Direct link to Annotating Structs and Enums">​</a></h2>
<p>To declare that a <span class="inline-code">struct</span> or <span class="inline-code">enum</span> has an ability, it is declared with <span class="inline-code">has &lt;ability&gt;</span> after the
datatype name and either before or after the fields/variants. For example:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Ignorable</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Pair</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">, </span><span class="token property-name function-argument struct-property-name">y</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">MyVec</span><span class="token struct-or-enum-definition">(</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">vector</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">u64</span><span class="token struct-or-enum-definition">&gt;) </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition enum-keyword keyword" style="color:hsl(301, 63%, 40%)">enum</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">IgnorableEnum</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">Variant</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition enum-keyword keyword" style="color:hsl(301, 63%, 40%)">enum</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">PairEnum</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">Variant</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition enum-keyword keyword" style="color:hsl(301, 63%, 40%)">enum</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">MyVecEnum</span><span class="token struct-or-enum-definition"> { </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Variant</span><span class="token struct-or-enum-definition"> } </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition">;</span><br></span></code></pre></div></div>
<p>In this case: <span class="inline-code">Ignorable*</span> has the <span class="inline-code">drop</span> ability. <span class="inline-code">Pair*</span> and <span class="inline-code">MyVec*</span> both have <span class="inline-code">copy</span>, <span class="inline-code">drop</span>,
and <span class="inline-code">store</span>.</p>
<p>All of these abilities have strong guarantees over these gated operations. The operation can be
performed on the value only if it has that ability; even if the value is deeply nested inside of
some other collection!</p>
<p>As such: when declaring a struct’s abilities, certain requirements are placed on the fields. All
fields must satisfy these constraints. These rules are necessary so that structs satisfy the
reachability rules for the abilities given above. If a struct is declared with the ability...</p>
<ul>
<li><span class="inline-code">copy</span>, all fields must have <span class="inline-code">copy</span>.</li>
<li><span class="inline-code">drop</span>, all fields must have <span class="inline-code">drop</span>.</li>
<li><span class="inline-code">store</span>, all fields must have <span class="inline-code">store</span>.</li>
<li><span class="inline-code">key</span>, all fields must have <span class="inline-code">store</span>.<!-- -->
<ul>
<li><span class="inline-code">key</span> is the only ability currently that doesn’t require itself.</li>
</ul>
</li>
</ul>
<p>An enum can have any of these abilities with the exception of <span class="inline-code">key</span>, which enums cannot have because
they cannot be top-level values (objects) in storage. The same rules apply to fields of enum
variants as they do for struct fields though. In particular, if an enum is declared with the
ability...</p>
<ul>
<li><span class="inline-code">copy</span>, all fields of all variants must have <span class="inline-code">copy</span>.</li>
<li><span class="inline-code">drop</span>, all fields of all variants must have <span class="inline-code">drop</span>.</li>
<li><span class="inline-code">store</span>, all fields of all variants must have <span class="inline-code">store</span>.</li>
<li><span class="inline-code">key</span>, is not allowed on enums as previously mentioned.</li>
</ul>
<p>For example:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:#A0A1A7">// A struct without any abilities</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">NoAbilities</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">WantsCopy</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">, </span><span class="token comment" style="color:#A0A1A7">// ERROR &#x27;NoAbilities&#x27; does not have &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition enum-keyword keyword" style="color:hsl(301, 63%, 40%)">enum</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">WantsCopyEnum</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Variant1</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Variant2(</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">), </span><span class="token comment" style="color:#A0A1A7">// ERROR &#x27;NoAbilities&#x27; does not have &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>and similarly:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:#A0A1A7">// A struct without any abilities</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">NoAbilities</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">MyData</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">key</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">, </span><span class="token comment" style="color:#A0A1A7">// Error &#x27;NoAbilities&#x27; does not have &#x27;store&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">MyDataEnum</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Variant1,</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Variant2(</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">), </span><span class="token comment" style="color:#A0A1A7">// Error &#x27;NoAbilities&#x27; does not have &#x27;store&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="conditional-abilities-and-generic-types">Conditional Abilities and Generic Types<a href="#conditional-abilities-and-generic-types" class="hash-link" aria-label="Direct link to Conditional Abilities and Generic Types" title="Direct link to Conditional Abilities and Generic Types">​</a></h2>
<p>When abilities are annotated on a generic type, not all instances of that type are guaranteed to
have that ability. Consider this struct declaration:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Cup</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">key</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">item</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain"> }</span><br></span></code></pre></div></div>
<p>It might be very helpful if <span class="inline-code">Cup</span> could hold any type, regardless of its abilities. The type system
can <em>see</em> the type parameter, so it should be able to remove abilities from <span class="inline-code">Cup</span> if it <em>sees</em> a
type parameter that would violate the guarantees for that ability.</p>
<p>This behavior might sound a bit confusing at first, but it might be more understandable if we think
about collection types. We could consider the builtin type <span class="inline-code">vector</span> to have the following type
declaration:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function-call function" style="color:hsl(221, 87%, 60%)">vector</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt; has </span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain">, </span><span class="token abilities support" style="color:#0184BC">drop</span><span class="token plain">, </span><span class="token abilities support" style="color:#0184BC">store</span><span class="token plain">;</span><br></span></code></pre></div></div>
<p>We want <span class="inline-code">vector</span>s to work with any type. We don&#x27;t want separate <span class="inline-code">vector</span> types for different
abilities. So what are the rules we would want? Precisely the same that we would want with the field
rules above. So, it would be safe to copy a <span class="inline-code">vector</span> value only if the inner elements can be copied.
It would be safe to ignore a <span class="inline-code">vector</span> value only if the inner elements can be ignored/dropped. And,
it would be safe to put a <span class="inline-code">vector</span> in storage only if the inner elements can be in storage.</p>
<p>To have this extra expressiveness, a type might not have all the abilities it was declared with
depending on the instantiation of that type; instead, the abilities a type will have depends on both
its declaration <strong>and</strong> its type arguments. For any type, type parameters are pessimistically
assumed to be used inside of the struct, so the abilities are only granted if the type parameters
meet the requirements described above for fields. Taking <span class="inline-code">Cup</span> from above as an example:</p>
<ul>
<li><span class="inline-code">Cup</span> has the ability <span class="inline-code">copy</span> only if <span class="inline-code">T</span> has <span class="inline-code">copy</span>.</li>
<li>It has <span class="inline-code">drop</span> only if <span class="inline-code">T</span> has <span class="inline-code">drop</span>.</li>
<li>It has <span class="inline-code">store</span> only if <span class="inline-code">T</span> has <span class="inline-code">store</span>.</li>
<li>It has <span class="inline-code">key</span> only if <span class="inline-code">T</span> has <span class="inline-code">store</span>.</li>
</ul>
<p>Here are examples for this conditional system for each ability:</p>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="example-conditional-copy">Example: conditional <span class="inline-code">copy</span><a href="#example-conditional-copy" class="hash-link" aria-label="Direct link to example-conditional-copy" title="Direct link to example-conditional-copy">​</a></h3>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">NoAbilities</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">S</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">bool</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Cup</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">item</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">example</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">c_x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">&gt;, </span><span class="token property-name function-argument struct-property-name">c_s</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">S</span><span class="token plain">&gt;) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// Valid, &#x27;Cup&lt;u64&gt;&#x27; has &#x27;copy&#x27; because &#x27;u64&#x27; has &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> c_x2 = </span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain"> c_x;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// Valid, &#x27;Cup&lt;S&gt;&#x27; has &#x27;copy&#x27; because &#x27;S&#x27; has &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> c_s2 = </span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain"> c_s;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">invalid</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">c_account</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;signer&gt;, </span><span class="token property-name function-argument struct-property-name">c_n</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">&gt;) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// Invalid, &#x27;Cup&lt;signer&gt;&#x27; does not have &#x27;copy&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// Even though &#x27;Cup&#x27; was declared with copy, the instance does not have &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// because &#x27;signer&#x27; does not have &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> c_account2 = </span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain"> c_account;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// Invalid, &#x27;Cup&lt;NoAbilities&gt;&#x27; does not have &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// because &#x27;NoAbilities&#x27; does not have &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> c_n2 = </span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain"> c_n;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="example-conditional-drop">Example: conditional <span class="inline-code">drop</span><a href="#example-conditional-drop" class="hash-link" aria-label="Direct link to example-conditional-drop" title="Direct link to example-conditional-drop">​</a></h3>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">NoAbilities</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">S</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">bool</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Cup</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">item</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">unused</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">bool</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">item</span><span class="token plain">: </span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain"> }; </span><span class="token comment" style="color:#A0A1A7">// Valid, &#x27;Cup&lt;bool&gt;&#x27; has &#x27;drop&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">S</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">item</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">S</span><span class="token plain"> { </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token plain"> }}; </span><span class="token comment" style="color:#A0A1A7">// Valid, &#x27;Cup&lt;S&gt;&#x27; has &#x27;drop&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">left_in_local</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">c_account</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;signer&gt;): </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> c_b = </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">bool</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">item</span><span class="token plain">: </span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain"> };</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> c_s = </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">S</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">item</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">S</span><span class="token plain"> { </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token plain"> }};</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// Valid return: &#x27;c_account&#x27;, &#x27;c_b&#x27;, and &#x27;c_s&#x27; have values</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// but &#x27;Cup&lt;signer&gt;&#x27;, &#x27;Cup&lt;bool&gt;&#x27;, and &#x27;Cup&lt;S&gt;&#x27; have &#x27;drop&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">invalid_unused</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// Invalid, Cannot ignore &#x27;Cup&lt;NoAbilities&gt;&#x27; because it does not have &#x27;drop&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// Even though &#x27;Cup&#x27; was declared with &#x27;drop&#x27;, the instance does not have &#x27;drop&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// because &#x27;NoAbilities&#x27; does not have &#x27;drop&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">item</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain"> {} };</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">invalid_left_in_local</span><span class="token plain">(): </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> n = </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">item</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain"> {} };</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// Invalid return: &#x27;c_n&#x27; has a value</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// and &#x27;Cup&lt;NoAbilities&gt;&#x27; does not have &#x27;drop&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="example-conditional-store">Example: conditional <span class="inline-code">store</span><a href="#example-conditional-store" class="hash-link" aria-label="Direct link to example-conditional-store" title="Direct link to example-conditional-store">​</a></h3>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Cup</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">item</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// &#x27;MyInnerData is declared with &#x27;store&#x27; so all fields need &#x27;store&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">MyInnerData</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">yes</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">&gt;, </span><span class="token comment" style="color:#A0A1A7">// Valid, &#x27;Cup&lt;u64&gt;&#x27; has &#x27;store&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// no: Cup&lt;signer&gt;, Invalid, &#x27;Cup&lt;signer&gt;&#x27; does not have &#x27;store&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// &#x27;MyData&#x27; is declared with &#x27;key&#x27; so all fields need &#x27;store&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">MyData</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">key</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">yes</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">&gt;, </span><span class="token comment" style="color:#A0A1A7">// Valid, &#x27;Cup&lt;u64&gt;&#x27; has &#x27;store&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">inner</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">MyInnerData</span><span class="token plain">&gt;, </span><span class="token comment" style="color:#A0A1A7">// Valid, &#x27;Cup&lt;MyInnerData&gt;&#x27; has &#x27;store&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// no: Cup&lt;signer&gt;, Invalid, &#x27;Cup&lt;signer&gt;&#x27; does not have &#x27;store&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="example-conditional-key">Example: conditional <span class="inline-code">key</span><a href="#example-conditional-key" class="hash-link" aria-label="Direct link to example-conditional-key" title="Direct link to example-conditional-key">​</a></h3>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">NoAbilities</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">MyData</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">key</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">valid</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">addr</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">address</span><span class="token plain">) acquires </span><span class="token struct-types entity" style="color:#C18401">MyData</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// Valid, &#x27;MyData&lt;u64&gt;&#x27; has &#x27;key&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">transfer</span><span class="token plain">(addr, </span><span class="token struct-types entity" style="color:#C18401">MyData</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> });</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">invalid</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">addr</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">address</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><span class="token comment" style="color:#A0A1A7">// Invalid, &#x27;MyData&lt;NoAbilities&gt;&#x27; does not have &#x27;key&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">transfer</span><span class="token plain">(addr, </span><span class="token struct-types entity" style="color:#C18401">MyData</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain"> {} })</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><span class="token comment" style="color:#A0A1A7">// Invalid, &#x27;MyData&lt;NoAbilities&gt;&#x27; does not have &#x27;key&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">borrow</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">&gt;(addr);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><span class="token comment" style="color:#A0A1A7">// Invalid, &#x27;MyData&lt;NoAbilities&gt;&#x27; does not have &#x27;key&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">borrow_mut</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">&gt;(addr);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// Mock storage operation</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">native</span><span class="token plain"> </span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">transfer</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">: </span><span class="token abilities support" style="color:#0184BC">key</span><span class="token plain">&gt;(</span><span class="token property-name function-argument struct-property-name">addr</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">address</span><span class="token plain">, </span><span class="token property-name function-argument struct-property-name">value</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">);</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/reference/generics"><div class="pagination-nav__label"><i class="fa fa-angle-left"></i><span class="pagination-nav__label">11. Generics</span> </div></a><a class="pagination-nav__link pagination-nav__link--next" href="/reference/uses"><div class="pagination-nav__label"><span class="pagination-nav__label">13. Uses and Aliases</span> <i class="fa fa-angle-right"></i></div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_VdoB thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-four-abilities" class="table-of-contents__link toc-highlight">The Four Abilities</a><ul><li><a href="#copy" class="table-of-contents__link toc-highlight"><code>copy</code></a></li><li><a href="#drop" class="table-of-contents__link toc-highlight"><code>drop</code></a></li><li><a href="#store" class="table-of-contents__link toc-highlight"><code>store</code></a></li><li><a href="#key" class="table-of-contents__link toc-highlight"><code>key</code></a></li></ul></li><li><a href="#builtin-types" class="table-of-contents__link toc-highlight">Builtin Types</a></li><li><a href="#annotating-structs-and-enums" class="table-of-contents__link toc-highlight">Annotating Structs and Enums</a></li><li><a href="#conditional-abilities-and-generic-types" class="table-of-contents__link toc-highlight">Conditional Abilities and Generic Types</a><ul><li><a href="#example-conditional-copy" class="table-of-contents__link toc-highlight">Example: conditional <code>copy</code></a></li><li><a href="#example-conditional-drop" class="table-of-contents__link toc-highlight">Example: conditional <code>drop</code></a></li><li><a href="#example-conditional-store" class="table-of-contents__link toc-highlight">Example: conditional <code>store</code></a></li><li><a href="#example-conditional-key" class="table-of-contents__link toc-highlight">Example: conditional <code>key</code></a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>