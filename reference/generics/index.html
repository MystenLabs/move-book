<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-reference docs-version-current docs-doc-page docs-doc-id-generics" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Generics | Reference | The Move Book</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://move-book.com/reference/generics"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="algolia-site-verification" content="BCA21DA2879818D2"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-reference-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-reference-current"><meta data-rh="true" property="og:title" content="Generics | Reference | The Move Book"><link data-rh="true" rel="icon" href="/favicon.svg"><link data-rh="true" rel="canonical" href="https://move-book.com/reference/generics"><link data-rh="true" rel="alternate" href="https://move-book.com/reference/generics" hreflang="en"><link data-rh="true" rel="alternate" href="https://move-book.com/reference/generics" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1E7R0BHX4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-B1E7R0BHX4",{anonymize_ip:!0})</script>



<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik:wght@300&amp;amp;display=swap">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/styles.f79f3242.css">
<script src="/assets/js/runtime~main.62e9cdbd.js" defer="defer"></script>
<script src="/assets/js/main.9757aefb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_OH5z" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"></a><a class="navbar__item navbar__link" href="/">Move Book</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/reference">Move Reference</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_aspp"><div class="navbar__search searchBarContainer_reza" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_Kpxf" value=""><div class="loadingRing_LRD_ searchBarLoadingRing_lY7z"><div></div><div></div><div></div><div></div></div></div></div><a href="https://github.com/MystenLabs/move-book" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><i class="fab fa-github"></i></a><div class="toggle_MW0i colorModeToggle_RHuM"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><i aria-hidden="true" class="toggleIcon_oIOL lightToggleIcon_SFTY fas fa-moon"></i><i aria-hidden="true" class="toggleIcon_oIOL darkToggleIcon_ekgs fas fa-sun"></i><i aria-hidden="true" class="toggleIcon_oIOL systemToggleIcon_yi_a fas fa-moon"></i></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_wWoK"><div class="docsWrapper_nrtX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_xs6u" type="button"></button><div class="docRoot_XRUv"><aside class="theme-doc-sidebar-container docSidebarContainer_vhZZ"><div class="sidebarViewport_HXJ_"><div class="sidebar_B2tA"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_RelJ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reference/">The Move Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Getting Started</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/modules">1. Modules</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Basic Concepts</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/reference/primitive-types">2. Primitive Types</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/integers">2.1 Integers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/bool">2.2 Bool</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/address">2.3 Address</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/vector">2.4 Vector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/references">2.5 References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/primitive-types/tuples">2.6 Tuples and Unit</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/variables">3. Local Variables and Scopes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/equality">4. Equality</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/reference/abort-and-assert">5. Abort and Assert</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/abort-and-assert/clever-errors">5.1 Clever Errors</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/reference/control-flow">6. Control Flow</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/control-flow/conditionals">6.1 Conditional Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/control-flow/loops">6.2 Loops</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/control-flow/labeled-control-flow">6.3 Labeled Control Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/control-flow/pattern-matching">6.4 Pattern Matching</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/reference/functions">7. Functions</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/functions/macros">7.1 Macros</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/structs">8. Structs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/enums">9. Enums</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/constants">10. Constants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reference/generics">11. Generics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/abilities">12. Abilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/uses">13. Uses and Aliases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Advanced Concepts</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/method-syntax">14. Method Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/index-syntax">15. Index Syntax</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Tooling</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/packages">16. Packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/unit-testing">17. Unit Testing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Reference</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/coding-conventions">18. Coding Conventions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Deprecated</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/friends">19. Friends</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_oT2n"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_LCKf"><div class="docItemContainer_Jixr"><article><div class="tocCollapsible_vYTS theme-doc-toc-mobile tocMobile_QhsY"><button type="button" class="clean-btn tocCollapsibleButton_nB9w">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Generics</h1></header>
<p>Generics can be used to define functions and structs over different input data types. This language
feature is sometimes referred to as parametric polymorphism. In Move, we will often use the term
generics interchangeably with <em>type parameters</em> and <em>type arguments</em>.</p>
<p>Generics are commonly used in library code, such as in <a href="/reference/primitive-types/vector">vector</a>, to
declare code that works over any possible type (that satisfies the specified constraints). This sort
of parameterization allows you to reuse the same implementation across multiple types and
situations.</p>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="declaring-type-parameters">Declaring Type Parameters<a href="#declaring-type-parameters" class="hash-link" aria-label="Direct link to Declaring Type Parameters" title="Direct link to Declaring Type Parameters">​</a></h2>
<p>Both functions and structs can take a list of type parameters in their signatures, enclosed by a
pair of angle brackets <span class="inline-code">&lt;...&gt;</span>.</p>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="generic-functions">Generic Functions<a href="#generic-functions" class="hash-link" aria-label="Direct link to Generic Functions" title="Direct link to Generic Functions">​</a></h3>
<p>Type parameters for functions are placed after the function name and before the (value) parameter
list. The following code defines a generic identity function that takes a value of any type and
returns that value unchanged.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">id</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt;(</span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">): </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// this type annotation is unnecessary but valid</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    (</span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Once defined, the type parameter <span class="inline-code">T</span> can be used in parameter types, return types, and inside the
function body.</p>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="generic-structs">Generic Structs<a href="#generic-structs" class="hash-link" aria-label="Direct link to Generic Structs" title="Direct link to Generic Structs">​</a></h3>
<p>Type parameters for structs are placed after the struct name, and can be used to name the types of
the fields.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Foo</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Bar</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T1</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T2</span><span class="token struct-or-enum-definition">&gt; </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">drop</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token property-value">T1</span><span class="token plain">,</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">y</span><span class="token plain">: </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">vector</span><span class="token plain">&lt;T2&gt;,</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Note that <a href="#unused-type-parameters">type parameters do not have to be used</a></p>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="type-arguments">Type Arguments<a href="#type-arguments" class="hash-link" aria-label="Direct link to Type Arguments" title="Direct link to Type Arguments">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="calling-generic-functions">Calling Generic Functions<a href="#calling-generic-functions" class="hash-link" aria-label="Direct link to Calling Generic Functions" title="Direct link to Calling Generic Functions">​</a></h3>
<p>When calling a generic function, one can specify the type arguments for the function&#x27;s type
parameters in a list enclosed by a pair of angle brackets.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> x = </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">id</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">bool</span><span class="token plain">&gt;(</span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain">);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>If you do not specify the type arguments, Move&#x27;s <a href="#type-inference">type inference</a> will supply them
for you.</p>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="using-generic-structs">Using Generic Structs<a href="#using-generic-structs" class="hash-link" aria-label="Direct link to Using Generic Structs" title="Direct link to Using Generic Structs">​</a></h3>
<p>Similarly, one can attach a list of type arguments for the struct&#x27;s type parameters when
constructing or destructing values of generic types.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// type arguments on construction</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> foo = </span><span class="token struct-types entity" style="color:#C18401">Foo</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">bool</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain"> };</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> bar = </span><span class="token struct-types entity" style="color:#C18401">Bar</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">, </span><span class="token built-in-types support" style="color:#0184BC">u8</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">, </span><span class="token property-name function-argument struct-property-name">y</span><span class="token plain">: </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">vector</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u8</span><span class="token plain">&gt;[] };</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// type arguments on destruction</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">Foo</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">bool</span><span class="token plain">&gt; { x } = foo;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">Bar</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">, </span><span class="token built-in-types support" style="color:#0184BC">u8</span><span class="token plain">&gt; { x, y } = bar;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>In any case if you do not specify the type arguments, Move&#x27;s <a href="#type-inference">type inference</a> will
supply them for you.</p>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="type-argument-mismatch">Type Argument Mismatch<a href="#type-argument-mismatch" class="hash-link" aria-label="Direct link to Type Argument Mismatch" title="Direct link to Type Argument Mismatch">​</a></h3>
<p>If you specify the type arguments and they conflict with the actual values supplied, an error will
be given:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> x = </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">id</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">&gt;(</span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain">); </span><span class="token comment" style="color:#A0A1A7">// ERROR! true is not a u64</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>and similarly:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> foo = </span><span class="token struct-types entity" style="color:#C18401">Foo</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">bool</span><span class="token plain">&gt; { </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> }; </span><span class="token comment" style="color:#A0A1A7">// ERROR! 0 is not a bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">Foo</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">address</span><span class="token plain">&gt; { x } = foo; </span><span class="token comment" style="color:#A0A1A7">// ERROR! bool is incompatible with address</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="type-inference">Type Inference<a href="#type-inference" class="hash-link" aria-label="Direct link to Type Inference" title="Direct link to Type Inference">​</a></h2>
<p>In most cases, the Move compiler will be able to infer the type arguments so you don&#x27;t have to write
them down explicitly. Here&#x27;s what the examples above would look like if we omit the type arguments:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> x = </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">id</span><span class="token plain">(</span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain">);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">//        ^ &lt;bool&gt; is inferred</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> foo = </span><span class="token struct-types entity" style="color:#C18401">Foo</span><span class="token plain"> { </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain"> };</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">//           ^ &lt;bool&gt; is inferred</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">Foo</span><span class="token plain"> { x } = foo;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">//     ^ &lt;bool&gt; is inferred</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Note: when the compiler is unable to infer the types, you&#x27;ll need annotate them manually. A common
scenario is to call a function with type parameters appearing only at return positions.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token module-header module-keyword keyword" style="color:hsl(301, 63%, 40%)">module</span><span class="token module-header"> </span><span class="token module-header package-name constant" style="color:hsl(35, 99%, 36%)">a</span><span class="token module-header double-colon punctuation" style="color:hsl(119, 34%, 47%)">::</span><span class="token module-header module-name entity" style="color:#C18401">m</span><span class="token module-header">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> v = </span><span class="token built-in-types support" style="color:#0184BC">vector</span><span class="token plain">[]; </span><span class="token comment" style="color:#A0A1A7">// ERROR!</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">//            ^ The compiler cannot figure out the element type, since it is never used</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> v = </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">vector</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">&gt;[];</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">//            ^~~~~ Must annotate manually in this case.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Note that these cases are a bit contrived since the <span class="inline-code">vector[]</span> is never used, ad as such, Move&#x27;s
type inference cannot infer the type.</p>
<p>However, the compiler will be able to infer the type if that value is used later in that function:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token module-header module-keyword keyword" style="color:hsl(301, 63%, 40%)">module</span><span class="token module-header"> </span><span class="token module-header package-name constant" style="color:hsl(35, 99%, 36%)">a</span><span class="token module-header double-colon punctuation" style="color:hsl(119, 34%, 47%)">::</span><span class="token module-header module-name entity" style="color:#C18401">m</span><span class="token module-header">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> v = </span><span class="token built-in-types support" style="color:#0184BC">vector</span><span class="token plain">[];</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">//            ^ &lt;u64&gt; is inferred</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token built-in-types support" style="color:#0184BC">vector</span><span class="token plain">::</span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">push_back</span><span class="token plain">(&amp;</span><span class="token mut-keyword keyword" style="color:hsl(301, 63%, 40%)">mut</span><span class="token plain"> v, </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">42</span><span class="token plain">);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">//               ^ &lt;u64&gt; is inferred</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="_-type"><span class="inline-code">_</span> Type<a href="#_-type" class="hash-link" aria-label="Direct link to _-type" title="Direct link to _-type">​</a></h3>
<p>In some cases, you might want to explicitly annotate some of the type arguments, but let the
compiler infer the others. The <span class="inline-code">_</span> type serves as such a placeholder for the compiler to infer the
type.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> bar = </span><span class="token struct-types entity" style="color:#C18401">Bar</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">, _&gt; { </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">, </span><span class="token property-name function-argument struct-property-name">y</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">vector</span><span class="token plain">[</span><span class="token string-literal string-literal-prefix">b&quot;</span><span class="token string-literal string-literal-content string" style="color:hsl(119, 34%, 47%)">hello</span><span class="token string-literal string-literal-content string" style="color:hsl(119, 34%, 47%)"></span><span class="token string-literal string-literal-content string" style="color:hsl(119, 34%, 47%)"></span><span class="token string-literal string-literal-content string" style="color:hsl(119, 34%, 47%)"></span><span class="token string-literal string-literal-content string" style="color:hsl(119, 34%, 47%)"></span><span class="token string-literal string-literal-content string" style="color:hsl(119, 34%, 47%)"></span><span class="token string-literal string-literal-content string" style="color:hsl(119, 34%, 47%)"></span><span class="token string-literal">&quot;</span><span class="token plain">] };</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//                 ^ vector&lt;u8&gt; is inferred</span><br></span></code></pre></div></div>
<p>The placeholder <span class="inline-code">_</span> may only appear in expressions and macro function definitions, not signatures.
This means you cannot use <span class="inline-code">_</span> as part of the definition of a function parameter, function return
type, constant definition type, and datatype field.</p>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="integers">Integers<a href="#integers" class="hash-link" aria-label="Direct link to Integers" title="Direct link to Integers">​</a></h2>
<p>In Move, the integer types <span class="inline-code">u8</span>, <span class="inline-code">u16</span>, <span class="inline-code">u32</span>, <span class="inline-code">u64</span>, <span class="inline-code">u128</span>, and <span class="inline-code">u256</span> are all distinct types.
However, each one of these types can be created with the same numerical value syntax. In other
words, if a type suffix is not provided, the compiler will infer the integer type based on the usage
of the value.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x8</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u8</span><span class="token plain"> = </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x16</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u16</span><span class="token plain"> = </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x32</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u32</span><span class="token plain"> = </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x64</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain"> = </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x128</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u128</span><span class="token plain"> = </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x256</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u256</span><span class="token plain"> = </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">;</span><br></span></code></pre></div></div>
<p>If the value is not used in a context that requires a specific integer type, <span class="inline-code">u64</span> is taken as a
default.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> x = </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//      ^ u64 is used by default</span><br></span></code></pre></div></div>
<p>If the value however is too large for the inferred type, an error will be given</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token let-statement">i</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u8</span><span class="token plain"> = </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">256</span><span class="token plain">; </span><span class="token comment" style="color:#A0A1A7">// ERROR!</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//          ^^^ too large for u8</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> x = </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">340282366920938463463374607431768211454</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ too large for u64</span><br></span></code></pre></div></div>
<p>In cases where the number is too large, you might need to annotate it explicitly</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> x = </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">340282366920938463463374607431768211454u128</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//                                             ^^^^ valid!</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="unused-type-parameters">Unused Type Parameters<a href="#unused-type-parameters" class="hash-link" aria-label="Direct link to Unused Type Parameters" title="Direct link to Unused Type Parameters">​</a></h2>
<p>For a struct definition, an unused type parameter is one that does not appear in any field defined
in the struct, but is checked statically at compile time. Move allows unused type parameters so the
following struct definition is valid:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Foo</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">foo</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>This can be convenient when modeling certain concepts. Here is an example:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token module-header module-keyword keyword" style="color:hsl(301, 63%, 40%)">module</span><span class="token module-header"> </span><span class="token module-header package-name constant" style="color:hsl(35, 99%, 36%)">a</span><span class="token module-header double-colon punctuation" style="color:hsl(119, 34%, 47%)">::</span><span class="token module-header module-name entity" style="color:#C18401">m</span><span class="token module-header">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// Currency Specifiers</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">A</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">B</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// A generic coin type that can be instantiated using a currency</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// specifier type.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//   e.g. Coin&lt;A&gt;, Coin&lt;B&gt; etc.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Coin</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Currency</span><span class="token struct-or-enum-definition">&gt; </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">value</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// Write code generically about all currencies</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">mint_generic</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">Currency</span><span class="token plain">&gt;(</span><span class="token property-name function-argument struct-property-name">value</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">): </span><span class="token struct-types entity" style="color:#C18401">Coin</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">Currency</span><span class="token plain">&gt; {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token struct-types entity" style="color:#C18401">Coin</span><span class="token plain"> { value }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// Write code concretely about one currency</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">mint_a</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">value</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">): </span><span class="token struct-types entity" style="color:#C18401">Coin</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">A</span><span class="token plain">&gt; {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">mint_generic</span><span class="token plain">(value)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">mint_b</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">value</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">): </span><span class="token struct-types entity" style="color:#C18401">Coin</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">B</span><span class="token plain">&gt; {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">mint_generic</span><span class="token plain">(value)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>In this example, <span class="inline-code">Coin&lt;Currency&gt;</span> is generic on the <span class="inline-code">Currency</span> type parameter, which specifies the
currency of the coin and allows code to be written either generically on any currency or concretely
on a specific currency. This generality applies even when the <span class="inline-code">Currency</span> type parameter does not
appear in any of the fields defined in <span class="inline-code">Coin</span>.</p>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="phantom-type-parameters">Phantom Type Parameters<a href="#phantom-type-parameters" class="hash-link" aria-label="Direct link to Phantom Type Parameters" title="Direct link to Phantom Type Parameters">​</a></h3>
<p>In the example above, although <span class="inline-code">struct Coin</span> asks for the <span class="inline-code">store</span> ability, neither <span class="inline-code">Coin&lt;A&gt;</span> nor
<span class="inline-code">Coin&lt;B&gt;</span> will have the <span class="inline-code">store</span> ability. This is because of the rules for
<a href="/reference/abilities#conditional-abilities-and-generic-types">Conditional Abilities and Generic Types</a> and
the fact that <span class="inline-code">A</span> and <span class="inline-code">B</span> don&#x27;t have the <span class="inline-code">store</span> ability, despite the fact that they are not even
used in the body of <span class="inline-code">struct Coin</span>. This might cause some unpleasant consequences. For example, we
are unable to put <span class="inline-code">Coin&lt;A&gt;</span> into a wallet in storage.</p>
<p>One possible solution would be to add spurious ability annotations to <span class="inline-code">A</span> and <span class="inline-code">B</span> (i.e.,
<span class="inline-code">public struct Currency1 has store {}</span>). But, this might lead to bugs or security vulnerabilities
because it weakens the types with unnecessary ability declarations. For example, we would never
expect a value in the storage to have a field in type <span class="inline-code">A</span>, but this would be possible with the
spurious <span class="inline-code">store</span> ability. Moreover, the spurious annotations would be infectious, requiring many
functions generic on the unused type parameter to also include the necessary constraints.</p>
<p>Phantom type parameters solve this problem. Unused type parameters can be marked as <em>phantom</em> type
parameters, which do not participate in the ability derivation for structs. In this way, arguments
to phantom type parameters are not considered when deriving the abilities for generic types, thus
avoiding the need for spurious ability annotations. For this relaxed rule to be sound, Move&#x27;s type
system guarantees that a parameter declared as <span class="inline-code">phantom</span> is either not used at all in the struct
definition, or it is only used as an argument to type parameters also declared as <span class="inline-code">phantom</span>.</p>
<h4 class="anchor anchorWithStickyNavbar_kl3l" id="declaration">Declaration<a href="#declaration" class="hash-link" aria-label="Direct link to Declaration" title="Direct link to Declaration">​</a></h4>
<p>In a struct definition a type parameter can be declared as phantom by adding the <span class="inline-code">phantom</span> keyword
before its declaration.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Coin</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">phantom</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Currency</span><span class="token struct-or-enum-definition">&gt; </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">value</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>If a type parameter is declared as phantom we say it is a phantom type parameter. When defining a
struct, Move&#x27;s type checker ensures that every phantom type parameter is either not used inside the
struct definition or it is only used as an argument to a phantom type parameter.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">S1</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">phantom</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T1</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T2</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//               ^^^^^^^ valid, T1 does not appear inside the struct definition</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">S2</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">phantom</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T1</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T2</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token property-value">S1</span><span class="token plain">&lt;T1, T2&gt; }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//               ^^^^^^^ valid, T1 appears in phantom position</span><br></span></code></pre></div></div>
<p>The following code shows examples of violations of the rule:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">S1</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">phantom</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//               ^^^^^^^ ERROR!  ^ Not a phantom position</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">S2</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">S3</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">phantom</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token property-value">S2</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt; }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//               ^^^^^^^ ERROR!     ^ Not a phantom position</span><br></span></code></pre></div></div>
<p>More formally, if a type is used as an argument to a phantom type parameter we say the type appears
in <em>phantom position</em>. With this definition in place, the rule for the correct use of phantom
parameters can be specified as follows: <strong>A phantom type parameter can only appear in phantom
position</strong>.</p>
<p>Note that specifying <span class="inline-code">phantom</span> is not required, but the compiler will warn if a type parameter could
be <span class="inline-code">phantom</span> but was not marked as such.</p>
<h4 class="anchor anchorWithStickyNavbar_kl3l" id="instantiation">Instantiation<a href="#instantiation" class="hash-link" aria-label="Direct link to Instantiation" title="Direct link to Instantiation">​</a></h4>
<p>When instantiating a struct, the arguments to phantom parameters are excluded when deriving the
struct abilities. For example, consider the following code:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">S</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T1</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">phantom</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T2</span><span class="token struct-or-enum-definition">&gt; </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">f</span><span class="token plain">: </span><span class="token property-value">T1</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">NoCopy</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">HasCopy</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Consider now the type <span class="inline-code">S&lt;HasCopy, NoCopy&gt;</span>. Since <span class="inline-code">S</span> is defined with <span class="inline-code">copy</span> and all non-phantom
arguments have <span class="inline-code">copy</span> then <span class="inline-code">S&lt;HasCopy, NoCopy&gt;</span> also has <span class="inline-code">copy</span>.</p>
<h4 class="anchor anchorWithStickyNavbar_kl3l" id="phantom-type-parameters-with-ability-constraints">Phantom Type Parameters with Ability Constraints<a href="#phantom-type-parameters-with-ability-constraints" class="hash-link" aria-label="Direct link to Phantom Type Parameters with Ability Constraints" title="Direct link to Phantom Type Parameters with Ability Constraints">​</a></h4>
<p>Ability constraints and phantom type parameters are orthogonal features in the sense that phantom
parameters can be declared with ability constraints.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">S</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">phantom</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">: </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain">}</span><br></span></code></pre></div></div>
<p>When instantiating a phantom type parameter with an ability constraint, the type argument has to
satisfy that constraint, even though the parameter is phantom. The usual restrictions apply and <span class="inline-code">T</span>
can only be instantiated with arguments having <span class="inline-code">copy</span>.</p>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="constraints">Constraints<a href="#constraints" class="hash-link" aria-label="Direct link to Constraints" title="Direct link to Constraints">​</a></h2>
<p>In the examples above, we have demonstrated how one can use type parameters to define &quot;unknown&quot;
types that can be plugged in by callers at a later time. This however means the type system has
little information about the type and has to perform checks in a very conservative way. In some
sense, the type system must assume the worst case scenario for an unconstrained generic--a type with
no <a href="/reference/abilities">abilities</a>.</p>
<p>Constraints offer a way to specify what properties these unknown types have so the type system can
allow operations that would otherwise be unsafe.</p>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="declaring-constraints">Declaring Constraints<a href="#declaring-constraints" class="hash-link" aria-label="Direct link to Declaring Constraints" title="Direct link to Declaring Constraints">​</a></h3>
<p>Constraints can be imposed on type parameters using the following syntax.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:#A0A1A7">// T is the name of the type parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">: &lt;ability&gt; (+ &lt;ability&gt;)*</span><br></span></code></pre></div></div>
<p>The <span class="inline-code">&lt;ability&gt;</span> can be any of the four <a href="/reference/abilities">abilities</a>, and a type parameter can be
constrained with multiple abilities at once. So all of the following would be valid type parameter
declarations:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">: </span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">: </span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain"> + </span><span class="token abilities support" style="color:#0184BC">drop</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">: </span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain"> + </span><span class="token abilities support" style="color:#0184BC">drop</span><span class="token plain"> + </span><span class="token abilities support" style="color:#0184BC">store</span><span class="token plain"> + </span><span class="token abilities support" style="color:#0184BC">key</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="verifying-constraints">Verifying Constraints<a href="#verifying-constraints" class="hash-link" aria-label="Direct link to Verifying Constraints" title="Direct link to Verifying Constraints">​</a></h3>
<p>Constraints are checked at instantiation sites</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Foo</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">: </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">copy</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Bar</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Foo</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u8</span><span class="token plain">&gt; }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//                         ^^ valid, u8 has `copy`</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Baz</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Foo</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt; }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//                            ^ ERROR! T does not have &#x27;copy&#x27;</span><br></span></code></pre></div></div>
<p>And similarly for functions</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">unsafe_consume</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt;(</span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// ERROR! x does not have &#x27;drop&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">consume</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">: </span><span class="token abilities support" style="color:#0184BC">drop</span><span class="token plain">&gt;(</span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// valid, x will be dropped automatically</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">NoAbilities</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> r = </span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain"> {};</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">consume</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">&gt;(</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">//      ^^^^^^^^^^^ ERROR! NoAbilities does not have &#x27;drop&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>And some similar examples, but with <span class="inline-code">copy</span></p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">unsafe_double</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt;(</span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    (</span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain"> x, x)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">// ERROR! T does not have &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">double</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">: </span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain">&gt;(</span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    (</span><span class="token abilities support" style="color:#0184BC">copy</span><span class="token plain"> x, x) </span><span class="token comment" style="color:#A0A1A7">// valid, T has &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">NoAbilities</span><span class="token struct-or-enum-definition"> {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">(): (</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">, </span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> r = </span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain"> {};</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">double</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">NoAbilities</span><span class="token plain">&gt;(r)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">//     ^ ERROR! NoAbilities does not have &#x27;copy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>For more information, see the abilities section on
<a href="/reference/abilities#conditional-abilities-and-generic-types">conditional abilities and generic types</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="limitations-on-recursions">Limitations on Recursions<a href="#limitations-on-recursions" class="hash-link" aria-label="Direct link to Limitations on Recursions" title="Direct link to Limitations on Recursions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="recursive-structs">Recursive Structs<a href="#recursive-structs" class="hash-link" aria-label="Direct link to Recursive Structs" title="Direct link to Recursive Structs">​</a></h3>
<p>Generic structs can not contain fields of the same type, either directly or indirectly, even with
different type arguments. All of the following struct definitions are invalid:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Foo</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Foo</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">&gt; </span><span class="token comment" style="color:#A0A1A7">// ERROR! &#x27;Foo&#x27; containing &#x27;Foo&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Bar</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Bar</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt; </span><span class="token comment" style="color:#A0A1A7">// ERROR! &#x27;Bar&#x27; containing &#x27;Bar&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// ERROR! &#x27;A&#x27; and &#x27;B&#x27; forming a cycle, which is not allowed either.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">A</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">B</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">, </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">B</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T1</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T2</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">x</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">A</span><span class="token plain">&lt;T1&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token property-name function-argument struct-property-name">y</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">A</span><span class="token plain">&lt;T2&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_kl3l" id="advanced-topic-type-level-recursions">Advanced Topic: Type-level Recursions<a href="#advanced-topic-type-level-recursions" class="hash-link" aria-label="Direct link to Advanced Topic: Type-level Recursions" title="Direct link to Advanced Topic: Type-level Recursions">​</a></h3>
<p>Move allows generic functions to be called recursively. However, when used in combination with
generic structs, this could create an infinite number of types in certain cases, and allowing this
means adding unnecessary complexity to the compiler, vm and other language components. Therefore,
such recursions are forbidden.</p>
<p>This restriction might be relaxed in the future, but for now, the following examples should give you
an idea of what is allowed and what is not.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token module-header module-keyword keyword" style="color:hsl(301, 63%, 40%)">module</span><span class="token module-header"> </span><span class="token module-header package-name constant" style="color:hsl(35, 99%, 36%)">a</span><span class="token module-header double-colon punctuation" style="color:hsl(119, 34%, 47%)">::</span><span class="token module-header module-name entity" style="color:#C18401">m</span><span class="token module-header">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">A</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// Finitely many types -- allowed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// foo&lt;T&gt; -&gt; foo&lt;T&gt; -&gt; foo&lt;T&gt; -&gt; ... is valid</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt;() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// Finitely many types -- allowed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// foo&lt;T&gt; -&gt; foo&lt;A&lt;u64&gt;&gt; -&gt; foo&lt;A&lt;u64&gt;&gt; -&gt; ... is valid</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt;() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">A</span><span class="token plain">&lt;</span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">&gt;&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Not allowed:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token module-header module-keyword keyword" style="color:hsl(301, 63%, 40%)">module</span><span class="token module-header"> </span><span class="token module-header package-name constant" style="color:hsl(35, 99%, 36%)">a</span><span class="token module-header double-colon punctuation" style="color:hsl(119, 34%, 47%)">::</span><span class="token module-header module-name entity" style="color:#C18401">m</span><span class="token module-header">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">A</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// Infinitely many types -- NOT allowed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// error!</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// foo&lt;T&gt; -&gt; foo&lt;A&lt;T&gt;&gt; -&gt; foo&lt;A&lt;A&lt;T&gt;&gt;&gt; -&gt; ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt;() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">Foo</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt;&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>And similarly, not allowed:</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token module-header module-keyword keyword" style="color:hsl(301, 63%, 40%)">module</span><span class="token module-header"> </span><span class="token module-header package-name constant" style="color:hsl(35, 99%, 36%)">a</span><span class="token module-header double-colon punctuation" style="color:hsl(119, 34%, 47%)">::</span><span class="token module-header module-name entity" style="color:#C18401">n</span><span class="token module-header">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">A</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// Infinitely many types -- NOT allowed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// error!</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// foo&lt;T1, T2&gt; -&gt; bar&lt;T2, T1&gt; -&gt; foo&lt;T2, A&lt;T1&gt;&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//   -&gt; bar&lt;A&lt;T1&gt;, T2&gt; -&gt; foo&lt;A&lt;T1&gt;, A&lt;T2&gt;&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//   -&gt; bar&lt;A&lt;T2&gt;, A&lt;T1&gt;&gt; -&gt; foo&lt;A&lt;T2&gt;, A&lt;A&lt;T1&gt;&gt;&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">//   -&gt; ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">&lt;T1, T2&gt;() {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">bar</span><span class="token plain">&lt;T2, T1&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">bar</span><span class="token plain">&lt;T1, T2&gt; {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">&lt;T1, </span><span class="token struct-types entity" style="color:#C18401">A</span><span class="token plain">&lt;T2&gt;&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Note, the check for type level recursions is based on a conservative analysis on the call sites and
does NOT take control flow or runtime values into account.</p>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token module-header module-keyword keyword" style="color:hsl(301, 63%, 40%)">module</span><span class="token module-header"> </span><span class="token module-header package-name constant" style="color:hsl(35, 99%, 36%)">a</span><span class="token module-header double-colon punctuation" style="color:hsl(119, 34%, 47%)">::</span><span class="token module-header module-name entity" style="color:#C18401">m</span><span class="token module-header">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">A</span><span class="token struct-or-enum-definition">&lt;</span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">T</span><span class="token struct-or-enum-definition">&gt; {</span><span class="token plain">}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// Infinitely many types -- NOT allowed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:#A0A1A7">// error!</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt;(</span><span class="token property-name function-argument struct-property-name">n</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u64</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token control-flow keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> (n &gt; </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">) </span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">foo</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">A</span><span class="token plain">&lt;</span><span class="token struct-types entity" style="color:#C18401">T</span><span class="token plain">&gt;&gt;(n - </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain">);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The function in the example above will technically terminate for any given input and therefore only
creating finitely many types, but it is still considered invalid by Move&#x27;s type system.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/reference/constants"><div class="pagination-nav__label"><i class="fa fa-angle-left"></i><span class="pagination-nav__label">10. Constants</span> </div></a><a class="pagination-nav__link pagination-nav__link--next" href="/reference/abilities"><div class="pagination-nav__label"><span class="pagination-nav__label">12. Abilities</span> <i class="fa fa-angle-right"></i></div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_VdoB thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#declaring-type-parameters" class="table-of-contents__link toc-highlight">Declaring Type Parameters</a><ul><li><a href="#generic-functions" class="table-of-contents__link toc-highlight">Generic Functions</a></li><li><a href="#generic-structs" class="table-of-contents__link toc-highlight">Generic Structs</a></li></ul></li><li><a href="#type-arguments" class="table-of-contents__link toc-highlight">Type Arguments</a><ul><li><a href="#calling-generic-functions" class="table-of-contents__link toc-highlight">Calling Generic Functions</a></li><li><a href="#using-generic-structs" class="table-of-contents__link toc-highlight">Using Generic Structs</a></li><li><a href="#type-argument-mismatch" class="table-of-contents__link toc-highlight">Type Argument Mismatch</a></li></ul></li><li><a href="#type-inference" class="table-of-contents__link toc-highlight">Type Inference</a><ul><li><a href="#_-type" class="table-of-contents__link toc-highlight"><code>_</code> Type</a></li></ul></li><li><a href="#integers" class="table-of-contents__link toc-highlight">Integers</a></li><li><a href="#unused-type-parameters" class="table-of-contents__link toc-highlight">Unused Type Parameters</a><ul><li><a href="#phantom-type-parameters" class="table-of-contents__link toc-highlight">Phantom Type Parameters</a></li></ul></li><li><a href="#constraints" class="table-of-contents__link toc-highlight">Constraints</a><ul><li><a href="#declaring-constraints" class="table-of-contents__link toc-highlight">Declaring Constraints</a></li><li><a href="#verifying-constraints" class="table-of-contents__link toc-highlight">Verifying Constraints</a></li></ul></li><li><a href="#limitations-on-recursions" class="table-of-contents__link toc-highlight">Limitations on Recursions</a><ul><li><a href="#recursive-structs" class="table-of-contents__link toc-highlight">Recursive Structs</a></li><li><a href="#advanced-topic-type-level-recursions" class="table-of-contents__link toc-highlight">Advanced Topic: Type-level Recursions</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>