<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Enums and Match - The Move Book</title>


        <!-- Custom HTML head -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300&display=swap" rel="stylesheet">
        <!-- Algolia -->
        <meta name="algolia-site-verification" content="BCA21DA2879818D2">
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-B1E7R0BHX4"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-B1E7R0BHX4');
        </script>

        <meta name="description" content="First book about the Move programming language and the Move VM. Move documentation, Move tutorials and language reference.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/css/custom.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> The Move Book</a></li><li class="chapter-item expanded "><a href="../foreword.html"><strong aria-hidden="true">2.</strong> Foreword</a></li><li class="chapter-item expanded "><a href="../before-we-begin/index.html"><strong aria-hidden="true">3.</strong> Before we begin</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../before-we-begin/install-sui.html"><strong aria-hidden="true">3.1.</strong> Install Sui</a></li><li class="chapter-item expanded "><a href="../before-we-begin/ide-support.html"><strong aria-hidden="true">3.2.</strong> Set up your IDE</a></li><li class="chapter-item expanded "><a href="../before-we-begin/move-2024.html"><strong aria-hidden="true">3.3.</strong> Move 2024</a></li></ol></li><li class="chapter-item expanded "><a href="../your-first-move/hello-world.html"><strong aria-hidden="true">4.</strong> Hello, World!</a></li><li class="chapter-item expanded "><a href="../your-first-move/hello-sui.html"><strong aria-hidden="true">5.</strong> Hello, Sui!</a></li><li class="chapter-item expanded "><a href="../concepts/index.html"><strong aria-hidden="true">6.</strong> Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../concepts/packages.html"><strong aria-hidden="true">6.1.</strong> Package</a></li><li class="chapter-item expanded "><a href="../concepts/manifest.html"><strong aria-hidden="true">6.2.</strong> Manifest</a></li><li class="chapter-item expanded "><a href="../concepts/address.html"><strong aria-hidden="true">6.3.</strong> Address</a></li><li class="chapter-item expanded "><a href="../concepts/what-is-an-account.html"><strong aria-hidden="true">6.4.</strong> Account</a></li><li class="chapter-item expanded "><a href="../concepts/what-is-a-transaction.html"><strong aria-hidden="true">6.5.</strong> Transaction</a></li></ol></li><li class="chapter-item expanded "><a href="../move-basics/index.html"><strong aria-hidden="true">7.</strong> Move Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../move-basics/module.html"><strong aria-hidden="true">7.1.</strong> Modules</a></li><li class="chapter-item expanded "><a href="../move-basics/comments.html"><strong aria-hidden="true">7.2.</strong> Comments</a></li><li class="chapter-item expanded "><a href="../move-basics/primitive-types.html"><strong aria-hidden="true">7.3.</strong> Primitive Types</a></li><li class="chapter-item expanded "><a href="../move-basics/address.html"><strong aria-hidden="true">7.4.</strong> Address Type</a></li><li class="chapter-item expanded "><a href="../move-basics/expression.html"><strong aria-hidden="true">7.5.</strong> Expressions</a></li><li class="chapter-item expanded "><a href="../move-basics/struct.html"><strong aria-hidden="true">7.6.</strong> Structs</a></li><li class="chapter-item expanded "><a href="../move-basics/abilities-introduction.html"><strong aria-hidden="true">7.7.</strong> Abilities: Introduction</a></li><li class="chapter-item expanded "><a href="../move-basics/drop-ability.html"><strong aria-hidden="true">7.8.</strong> Ability: Drop</a></li><li class="chapter-item expanded "><a href="../move-basics/importing-modules.html"><strong aria-hidden="true">7.9.</strong> Importing Modules</a></li><li class="chapter-item expanded "><a href="../move-basics/standard-library.html"><strong aria-hidden="true">7.10.</strong> Standard Library</a></li><li class="chapter-item expanded "><a href="../move-basics/vector.html"><strong aria-hidden="true">7.11.</strong> Vector</a></li><li class="chapter-item expanded "><a href="../move-basics/option.html"><strong aria-hidden="true">7.12.</strong> Option</a></li><li class="chapter-item expanded "><a href="../move-basics/string.html"><strong aria-hidden="true">7.13.</strong> String</a></li><li class="chapter-item expanded "><a href="../move-basics/control-flow.html"><strong aria-hidden="true">7.14.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="../move-basics/enum-and-match.html" class="active"><strong aria-hidden="true">7.15.</strong> Enums and Match</a></li><li class="chapter-item expanded "><a href="../move-basics/constants.html"><strong aria-hidden="true">7.16.</strong> Constants</a></li><li class="chapter-item expanded "><a href="../move-basics/assert-and-abort.html"><strong aria-hidden="true">7.17.</strong> Aborting Execution</a></li><li class="chapter-item expanded "><a href="../move-basics/function.html"><strong aria-hidden="true">7.18.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../move-basics/struct-methods.html"><strong aria-hidden="true">7.19.</strong> Struct Methods</a></li><li class="chapter-item expanded "><a href="../move-basics/visibility.html"><strong aria-hidden="true">7.20.</strong> Visibility Modifiers</a></li><li class="chapter-item expanded "><a href="../move-basics/ownership-and-scope.html"><strong aria-hidden="true">7.21.</strong> Ownership and Scope</a></li><li class="chapter-item expanded "><a href="../move-basics/copy-ability.html"><strong aria-hidden="true">7.22.</strong> Ability: Copy</a></li><li class="chapter-item expanded "><a href="../move-basics/references.html"><strong aria-hidden="true">7.23.</strong> References</a></li><li class="chapter-item expanded "><a href="../move-basics/generics.html"><strong aria-hidden="true">7.24.</strong> Generics</a></li><li class="chapter-item expanded "><a href="../move-basics/type-reflection.html"><strong aria-hidden="true">7.25.</strong> Type Reflection</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.26.</strong> Macros: Introduction</div></li><li class="chapter-item expanded "><a href="../move-basics/testing.html"><strong aria-hidden="true">7.27.</strong> Testing</a></li></ol></li><li class="chapter-item expanded "><a href="../object/index.html"><strong aria-hidden="true">8.</strong> Object Model</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../object/digital-assets.html"><strong aria-hidden="true">8.1.</strong> Language for Digital Assets</a></li><li class="chapter-item expanded "><a href="../object/evolution-of-move.html"><strong aria-hidden="true">8.2.</strong> Evolution of Move</a></li><li class="chapter-item expanded "><a href="../object/object-model.html"><strong aria-hidden="true">8.3.</strong> What is an Object?</a></li><li class="chapter-item expanded "><a href="../object/ownership.html"><strong aria-hidden="true">8.4.</strong> Ownership</a></li><li class="chapter-item expanded "><a href="../object/fast-path-and-consensus.html"><strong aria-hidden="true">8.5.</strong> Fast Path & Consensus</a></li></ol></li><li class="chapter-item expanded "><a href="../storage/index.html"><strong aria-hidden="true">9.</strong> Using Objects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../storage/key-ability.html"><strong aria-hidden="true">9.1.</strong> Ability: Key</a></li><li class="chapter-item expanded "><a href="../storage/storage-functions.html"><strong aria-hidden="true">9.2.</strong> Storage Functions</a></li><li class="chapter-item expanded "><a href="../storage/store-ability.html"><strong aria-hidden="true">9.3.</strong> Ability: Store</a></li><li class="chapter-item expanded "><a href="../storage/uid-and-id.html"><strong aria-hidden="true">9.4.</strong> UID and ID</a></li><li class="chapter-item expanded "><a href="../storage/transfer-restrictions.html"><strong aria-hidden="true">9.5.</strong> Restricted and Public Transfer</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.6.</strong> Transfer to Object</div></li></ol></li><li class="chapter-item expanded "><a href="../programmability/index.html"><strong aria-hidden="true">10.</strong> Advanced Programmability</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programmability/transaction-context.html"><strong aria-hidden="true">10.1.</strong> Transaction Context</a></li><li class="chapter-item expanded "><a href="../programmability/module-initializer.html"><strong aria-hidden="true">10.2.</strong> Module Initializer</a></li><li class="chapter-item expanded "><a href="../programmability/capability.html"><strong aria-hidden="true">10.3.</strong> Pattern: Capability</a></li><li class="chapter-item expanded "><a href="../programmability/epoch-and-time.html"><strong aria-hidden="true">10.4.</strong> Epoch and Time</a></li><li class="chapter-item expanded "><a href="../programmability/collections.html"><strong aria-hidden="true">10.5.</strong> Collections</a></li><li class="chapter-item expanded "><a href="../programmability/wrapper-type-pattern.html"><strong aria-hidden="true">10.6.</strong> Pattern: Wrapper Type</a></li><li class="chapter-item expanded "><a href="../programmability/dynamic-fields.html"><strong aria-hidden="true">10.7.</strong> Dynamic Fields</a></li><li class="chapter-item expanded "><a href="../programmability/dynamic-object-fields.html"><strong aria-hidden="true">10.8.</strong> Dynamic Object Fields</a></li><li class="chapter-item expanded "><a href="../programmability/dynamic-collections.html"><strong aria-hidden="true">10.9.</strong> Dynamic Collections</a></li><li class="chapter-item expanded "><a href="../programmability/witness-pattern.html"><strong aria-hidden="true">10.10.</strong> Pattern: Witness</a></li><li class="chapter-item expanded "><a href="../programmability/one-time-witness.html"><strong aria-hidden="true">10.11.</strong> One Time Witness</a></li><li class="chapter-item expanded "><a href="../programmability/publisher.html"><strong aria-hidden="true">10.12.</strong> Publisher Authority</a></li><li class="chapter-item expanded "><a href="../programmability/display.html"><strong aria-hidden="true">10.13.</strong> Object Display</a></li><li class="chapter-item expanded "><a href="../programmability/events.html"><strong aria-hidden="true">10.14.</strong> Events</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.15.</strong> Balance & Coin</div></li><li class="chapter-item expanded "><a href="../programmability/sui-framework.html"><strong aria-hidden="true">10.16.</strong> Sui Framework</a></li><li class="chapter-item expanded "><a href="../programmability/hot-potato-pattern.html"><strong aria-hidden="true">10.17.</strong> Pattern: Hot Potato</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.18.</strong> Pattern: Request</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.19.</strong> Pattern: Object Capability</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.20.</strong> Package Upgrades</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.21.</strong> Transaction Blocks</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.22.</strong> Authorization Patterns</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.23.</strong> Cryptography and Hashing</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.24.</strong> Randomness</div></li><li class="chapter-item expanded "><a href="../programmability/bcs.html"><strong aria-hidden="true">10.25.</strong> BCS</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Guides</li><li class="chapter-item expanded "><a href="../guides/2024-migration-guide.html"><strong aria-hidden="true">11.</strong> 2024 Migration Guide</a></li><li class="chapter-item expanded "><a href="../guides/upgradeability-practices.html"><strong aria-hidden="true">12.</strong> Upgradability Practices</a></li><li class="chapter-item expanded "><a href="../guides/building-against-limits.html"><strong aria-hidden="true">13.</strong> Building Against Limits</a></li><li class="chapter-item expanded "><a href="../guides/better-error-handling.html"><strong aria-hidden="true">14.</strong> Better Error Handling</a></li><li class="chapter-item expanded "><a href="../guides/code-quality-checklist.html"><strong aria-hidden="true">15.</strong> Code Quality Checklist</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.</strong> Open-sourcing Libraries</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">17.</strong> Creating an NFT Collection</div></li><li class="chapter-item expanded affix "><li class="part-title">Appendix</li><li class="chapter-item expanded "><a href="../appendix/glossary.html"><strong aria-hidden="true">18.</strong> A - Glossary</a></li><li class="chapter-item expanded "><a href="../appendix/reserved-addresses.html"><strong aria-hidden="true">19.</strong> B - Reserved Addresses</a></li><li class="chapter-item expanded "><a href="../appendix/publications.html"><strong aria-hidden="true">20.</strong> C - Publications</a></li><li class="chapter-item expanded "><a href="../appendix/contributing.html"><strong aria-hidden="true">21.</strong> D - Contributing</a></li><li class="chapter-item expanded "><a href="../appendix/acknowledgements.html"><strong aria-hidden="true">22.</strong> E - Acknowledgements</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Move Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/MystenLabs/move-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/MystenLabs/move-book/edit/main/book/src/move-basics/enum-and-match.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="enums-and-match"><a class="header" href="#enums-and-match">Enums and Match</a></h1>
<p>An enum is a user-defined data structure that, unlike a <a href="./struct.html">struct</a>, can represent
multiple variants. Each variant can contain primitive types, structs, or other enums. However,
recursive enum definitions — similar to recursive struct definitions — are not allowed.</p>
<h2 id="definition"><a class="header" href="#definition">Definition</a></h2>
<p>An enum is defined using the <code>enum</code> keyword, followed by optional abilities and a block of variant
definitions. Each variant has a tag name and may optionally include either positional values or
named fields. Enum must have at least one variant. The structure of each variant is not flexible,
and the total number of variants can be relatively large - up to 100.</p>
<pre><code class="language-move">module book::segment;

use std::string::String;

/// `Segment` enum definition.
/// Defines various string segments.
public enum Segment has copy, drop {
    /// Empty variant, no value.
    Empty,
    /// Variant with a value (positional style).
    String(String),
    /// Variant with named fields.
    Special {
        content: vector&lt;u8&gt;,
        encoding: u8, // Encoding tag.
    },
}
</code></pre>
<p>In the code sample above we defined a public <code>Segment</code> enum, which has the <code>drop</code> and <code>copy</code>
abilities, and 3 variants:</p>
<ul>
<li><code>Empty</code>, which has no fields.</li>
<li><code>String</code>, which contains a single positional field of type <code>String</code>.</li>
<li><code>Special</code>, which uses named fields: <code>content</code> of type <code>vector&lt;u8&gt;</code> and <code>encoding</code> of type <code>u8</code>.</li>
</ul>
<h2 id="instantiating"><a class="header" href="#instantiating">Instantiating</a></h2>
<p>Enums are <em>internal</em> to the module in which they are defined. This means an enum can only be
constructed, read, and unpacked within the same module.</p>
<p><a href="./struct.html#create-and-use-an-instance">Similar to structs</a>, enums are instantiated by specifying
the type, the variant, and the values for any fields defined in that variant.</p>
<pre><code class="language-move">/// Constructs an `Empty` segment.
public fun new_empty(): Segment { Segment::Empty }

/// Constructs a `String` segment with the `str` value.
public fun new_string(str: String): Segment { Segment::String(str) }

/// Constructs a `Special` segment with the `content` and `encoding` values.
public fun new_special(content: vector&lt;u8&gt;, encoding: u8): Segment {
    Segment::Special {
        content,
        encoding,
    }
}
</code></pre>
<p>Depending on the use case, you may want to provide public constructors, or instantiate enums
internally as a part of application logic.</p>
<h2 id="using-in-type-definitions"><a class="header" href="#using-in-type-definitions">Using in Type Definitions</a></h2>
<p>The biggest benefit of using enums is the ability to represent varying data structures under a
single type. To demonstrate this, let’s define a struct that contains a vector of <code>Segment</code> values:</p>
<pre><code class="language-move">/// A struct to demonstrate enum capabilities.
public struct Segments(vector&lt;Segment&gt;) has copy, drop;

#[test]
fun test_segments() {
    let _ = Segments(vector[
        Segment::Empty,
        Segment::String(b&quot;hello&quot;.to_string()),
        Segment::String(b&quot; move&quot;.to_string()),
        Segment::Special { content: b&quot;21&quot;, encoding: 1 },
    ]);
}
</code></pre>
<p>All variants of the Segment enum share the same type – <code>Segment</code> – which allows us to create a
homogeneous vector containing instances of different variants. This kind of flexibility is not
achievable with structs, as each struct defines a single, fixed shape.</p>
<h2 id="pattern-matching"><a class="header" href="#pattern-matching">Pattern Matching</a></h2>
<p>Unlike structs, enums require special handling when it comes to accessing the inner value or
checking the variant. We simply cannot read the inner fields of an enum using the <code>.</code> (dot) syntax,
because we need to make sure that the value we are trying to access is the right one. For that Move
offers <em>pattern matching</em> syntax.</p>
<blockquote>
<p>This chapter doesn't intend to cover all the features of pattern matching in Move. Refer to the
<a href="/reference/control-flow/pattern-matching.html">Pattern Matching</a> section in the Move Reference.</p>
</blockquote>
<p>Pattern matching allows conditioning the logic based on the <em>pattern</em> of the value. It is performed
using the <code>match</code> expression, followed by the matched value in parenthesis and the block of <em>match
arms</em>, defining the patten and expression to be performed if the pattern is right.</p>
<p>Let's extend our example by adding a set of <code>is_variant</code>-like functions, so external packages can
check the variant. Starting with <code>is_empty</code>.</p>
<pre><code class="language-move">/// Whether this is an `Empty` segment.
public fun is_empty(s: &amp;Segment): bool {
    // Match is an expression, hence we can use it for return value.
    match (s) {
        Segment::Empty =&gt; true,
        Segment::String(_str) =&gt; false,
        Segment::Special { content: _, encoding: _ } =&gt; false,
    }
}
</code></pre>
<p>The <code>match</code> keyword begins the expression, and <code>s</code> is the value being tested. Each match arm checks
for a specific variant of the <code>Segment</code> enum. If <code>s</code> matches <code>Segment::Empty</code>, the function returns
<code>true</code>; otherwise, it returns <code>false</code>.</p>
<p>For variants with fields, we need to bind the inner structure to local variables (even if we don’t
use them, marking unused values with <code>_</code> to avoid compiler warnings).</p>
<h3 id="trick-1---any-condition"><a class="header" href="#trick-1---any-condition">Trick #1 - <em>any</em> Condition</a></h3>
<p>The Move compiler infers the type of the value used in a <code>match</code> expression and ensures that the
<em>match arms</em> are exhaustive – that is, all possible variants or values must be covered.</p>
<p>However, in some cases, such as matching on a primitive value or a collection like a vector, it's
not feasible to list every possible case. For these situations, match supports a wildcard pattern
(<code>_</code>), which acts as a default arm. This arm is executed when no other patterns match.</p>
<p>We can demonstrate this by simplifying our <code>is_empty</code> function and replacing the non-<code>Empty</code>
variants with a wildcard:</p>
<pre><code class="language-move">public fun is_empty(s: &amp;Segment): bool {
    match (s) {
        Segment::Empty =&gt; true,
        _ =&gt; false, // Anything else returns `false`.
    }
}
</code></pre>
<p>Similarly, we can use the same approach to define <code>is_special</code> and <code>is_string</code>:</p>
<pre><code class="language-move">/// Whether this is a `Special` segment.
public fun is_special(s: &amp;Segment): bool {
    match (s) {
        // Hint: the `..` ignores inner fields
        Segment::Special { .. } =&gt; true,
        _ =&gt; false,
    }
}

/// Whether this is a `String` segment.
public fun is_string(s: &amp;Segment): bool {
    match (s) {
        Segment::String(_) =&gt; true,
        _ =&gt; false,
    }
}
</code></pre>
<h3 id="trick-2---try_into-helpers"><a class="header" href="#trick-2---try_into-helpers">Trick #2 - <code>try_into</code> Helpers</a></h3>
<p>With the addition of <code>is_variant</code> functions, we enabled external modules to check which variant an
enum instance represents. However, this is often not enough – external code still cannot access the
inner value of a variant due to enums being internal to their module.</p>
<p>A common pattern for addressing this is to define <code>try_into</code> functions. These functions match on the
value and return an <code>Option</code> containing the inner contents if the <code>match</code> succeeds.</p>
<pre><code class="language-move">/// Returns `Some(String)` if the `Segment` is `String`, `None` otherwise.
public fun try_into_inner_string(s: Segment): Option&lt;String&gt; {
    match (s) {
        Segment::String(str) =&gt; option::some(str),
        _ =&gt; option::none(),
    }
}
</code></pre>
<p>This pattern safely exposes internal data in a controlled way, avoiding abort.</p>
<h3 id="trick-3---matching-on-primitive-values"><a class="header" href="#trick-3---matching-on-primitive-values">Trick #3 - Matching on Primitive Values</a></h3>
<p>The <code>match</code> expression in Move can be used with values of any type – enums, structs, or primitives.
To demonstrate this, let’s implement a <code>to_string</code> function that creates a new <code>String</code> from a
<code>Segment</code>. In the case of the <code>Special</code> variant, we will match on the <code>encoding</code> field to determine
how to decode the content.</p>
<pre><code class="language-move">/// Return a `String` representation of a segment.
public fun to_string(s: &amp;Segment): String {
    match (*s) {
        // Return an empty string.
        Segment::Empty =&gt; b&quot;&quot;.to_string(),
        // Return the inner string.
        Segment::String(str) =&gt; str,
        // Return the decoded contents based on the encoding.
        Segment::Special { content, encoding } =&gt; {
            // Perform a match on the encoding, we only support 0 - ut8, 1 - hex.
            match (encoding) {
                // Plain encoding, return content.
                0 =&gt; content.to_string(),
                // HEX encoding, decode and return.
                1 =&gt; sui::hex::decode(content).to_string(),
                // We have to provide a wildcard pattern, because values of `u8` are 0-255.
                _ =&gt; abort,
            }
        },
    }
}
</code></pre>
<p>This function demonstrates two key things:</p>
<ul>
<li>Nested <code>match</code> expressions can be used for deeper logic branching.</li>
<li>Wildcards are essential for covering all possible values in primitive types like <code>u8</code>.</li>
</ul>
<h2 id="the-final-test"><a class="header" href="#the-final-test">The Final Test</a></h2>
<p>Now we can finalize the test we started before using the features we have added. Let's create a
scenario where we build enums into a vector.</p>
<pre><code class="language-move">// Note, that the module has changed!
module book::segment_tests;

use book::segment;
use std::unit_test::assert_eq;

#[test]
fun test_full_enum_cycle() {
    // Create a vector of different Segment variants.
    let segments = vector[
        segment::new_empty(),
        segment::new_string(b&quot;hello&quot;.to_string()),
        segment::new_special(b&quot; &quot;, 0), // plaintext
        segment::new_string(b&quot;move&quot;.to_string()),
        segment::new_special(b&quot;21&quot;, 1), // hex
    ];

    // Aggregate all segments into the final string using `vector::fold!` macro.
    let result = segments.fold!(b&quot;&quot;.to_string(), |mut acc, segment| {
        // Do not append empty, only `Special` and `String`.
        if (!segment.is_empty()) {
            acc.append(segment.to_string());
        };
        acc
    });

    // Check that the result is what's expected.
    assert_eq!(result, b&quot;hello move!&quot;.to_string());
}
</code></pre>
<p>This test demonstrates the full enum workflow: instantiating different variants, using public
accessors, and performing logic with pattern matching. That should be enough to get you started!</p>
<p>To learn more about enums and pattern matching, refer to the resources listed in the
<a href="#further-reading">further reading</a> section.</p>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<ul>
<li>Enums are user-defined types that can represent multiple variants under a single type.</li>
<li>Each variant can contain different types of data (primitives, structs, or other enums).</li>
<li>Enums are internal to their defining module and require pattern matching for access.</li>
<li>Pattern matching is done using the <code>match</code> expression, which:
<ul>
<li>Works with enums, structs, and primitive values;</li>
<li>Must handle all possible cases (be exhaustive);</li>
<li>Supports the <code>_</code> wildcard pattern for remaining cases;</li>
<li>Can return values and be used in expressions;</li>
</ul>
</li>
<li>Common patterns for enums include <code>is_variant</code> checks and <code>try_into</code> helper functions.</li>
</ul>
<h2 id="further-reading"><a class="header" href="#further-reading">Further Reading</a></h2>
<ul>
<li><a href="/reference/enums.html">Enums</a> in the Move Reference</li>
<li><a href="/reference/control-flow/pattern-matching.html">Pattern Matching</a> in the Move Reference</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../move-basics/control-flow.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../move-basics/constants.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../move-basics/control-flow.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../move-basics/constants.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/switcher.js"></script>


    </div>
    </body>
</html>
