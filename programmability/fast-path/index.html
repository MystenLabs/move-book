<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-book docs-version-current docs-doc-page docs-doc-id-programmability/fast-path" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Fast Path | The Move Book</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://move-book.com/programmability/fast-path"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="algolia-site-verification" content="BCA21DA2879818D2"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-book-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-book-current"><meta data-rh="true" property="og:title" content="Fast Path | The Move Book"><meta data-rh="true" name="description" content="Due to the object model and the data organization model of Sui, some operations can be performed in"><meta data-rh="true" property="og:description" content="Due to the object model and the data organization model of Sui, some operations can be performed in"><link data-rh="true" rel="icon" href="/favicon.svg"><link data-rh="true" rel="canonical" href="https://move-book.com/programmability/fast-path"><link data-rh="true" rel="alternate" href="https://move-book.com/programmability/fast-path" hreflang="en"><link data-rh="true" rel="alternate" href="https://move-book.com/programmability/fast-path" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1E7R0BHX4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-B1E7R0BHX4",{anonymize_ip:!0})</script>



<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik:wght@300&amp;amp;display=swap">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/styles.f79f3242.css">
<script src="/assets/js/runtime~main.a7ece14f.js" defer="defer"></script>
<script src="/assets/js/main.9757aefb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_OH5z" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Move Book</a><a class="navbar__item navbar__link" href="/reference">Move Reference</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_aspp"><div class="navbar__search searchBarContainer_reza" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_Kpxf" value=""><div class="loadingRing_LRD_ searchBarLoadingRing_lY7z"><div></div><div></div><div></div><div></div></div></div></div><a href="https://github.com/MystenLabs/move-book" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><i class="fab fa-github"></i></a><div class="toggle_MW0i colorModeToggle_RHuM"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><i aria-hidden="true" class="toggleIcon_oIOL lightToggleIcon_SFTY fas fa-moon"></i><i aria-hidden="true" class="toggleIcon_oIOL darkToggleIcon_ekgs fas fa-sun"></i><i aria-hidden="true" class="toggleIcon_oIOL systemToggleIcon_yi_a fas fa-moon"></i></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_wWoK"><div class="docsWrapper_nrtX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_xs6u" type="button"></button><div class="docRoot_XRUv"><main class="docMainContainer_oT2n docMainContainerEnhanced_F6TM"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_LCKf"><div class="docItemContainer_Jixr"><article><div class="tocCollapsible_vYTS theme-doc-toc-mobile tocMobile_QhsY"><button type="button" class="clean-btn tocCollapsibleButton_nB9w">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Fast Path</h1></header>
<p>Due to the object model and the data organization model of Sui, some operations can be performed in
a more efficient and parallelized way. This is called the <strong>fast path</strong>. Transaction that touches
shared state requires consensus because it can be accessed by multiple parties at the same time.
However, if the transaction only touches the private state (owned objects), there is no need for
consensus. This is the fast path.</p>
<p>We have a favorite example for this: a coffee machine and a coffee cup. The coffee machine placed in
the office is a shared resource - everyone can use it, but there can be only one user at a time. The
coffee cup, on the other hand, is a private resource - it belongs to a specific person, and only
that person can use it. To make coffee, one needs to use the coffee machine and wait if there&#x27;s
someone else using it. However, once the coffee is made and poured into the cup, the person can take
the cup and drink the coffee without waiting for anyone else.</p>
<p>The same principle applies to Sui. If a transaction only touches the private state (the cup with
coffee), it can be executed without consensus. If it touches the shared state (the coffee machine),
it requires consensus. This is the fast path.</p>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="frozen-objects">Frozen objects<a href="#frozen-objects" class="hash-link" aria-label="Direct link to Frozen objects" title="Direct link to Frozen objects">​</a></h2>
<p>Consensus is only required for mutating the shared state. If the object is immutable, it is treated
as a &quot;constant&quot; and can be accessed in parallel. Frozen objects can be used to share unchangeable
data between multiple parties without requiring consensus.</p>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="in-practice">In Practice<a href="#in-practice" class="hash-link" aria-label="Direct link to In Practice" title="Direct link to In Practice">​</a></h2>
<div class="language-move codeBlockContainer_AE_o theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_YOHW"><pre tabindex="0" class="prism-code language-move codeBlock_q9R9 thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_bu_M"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token module-header module-keyword keyword" style="color:hsl(301, 63%, 40%)">module</span><span class="token module-header"> </span><span class="token module-header package-name constant" style="color:hsl(35, 99%, 36%)">book</span><span class="token module-header double-colon punctuation" style="color:hsl(119, 34%, 47%)">::</span><span class="token module-header module-name entity" style="color:#C18401">coffee_machine</span><span class="token module-header"> {</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">/// Coffee machine is a shared object, hence requires `key` ability.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">CoffeeMachine</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">key</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">id</span><span class="token plain">: </span><span class="token const-use constant" style="color:hsl(35, 99%, 36%)">UID</span><span class="token plain">, </span><span class="token property-name function-argument struct-property-name">counter</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">u16</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">/// Cup is an owned object.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token struct-or-enum-definition struct-keyword keyword" style="color:hsl(301, 63%, 40%)">struct</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-name entity" style="color:#C18401">Cup</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition struct-has keyword" style="color:hsl(301, 63%, 40%)">has</span><span class="token struct-or-enum-definition"> </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">key</span><span class="token struct-or-enum-definition">, </span><span class="token struct-or-enum-definition abilities support" style="color:#0184BC">store</span><span class="token struct-or-enum-definition"> {</span><span class="token plain"> </span><span class="token property-name function-argument struct-property-name">id</span><span class="token plain">: </span><span class="token const-use constant" style="color:hsl(35, 99%, 36%)">UID</span><span class="token plain">, </span><span class="token property-name function-argument struct-property-name">has_coffee</span><span class="token plain">: </span><span class="token built-in-types support" style="color:#0184BC">bool</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">/// Initialize the module and share the `CoffeeMachine` object.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">init</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">ctx</span><span class="token plain">: &amp;</span><span class="token mut-keyword keyword" style="color:hsl(301, 63%, 40%)">mut</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">TxContext</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        transfer::</span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">share_object</span><span class="token plain">(</span><span class="token struct-types entity" style="color:#C18401">CoffeeMachine</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token property-name function-argument struct-property-name">id</span><span class="token plain">: </span><span class="token property-value">object</span><span class="token plain">::</span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">new</span><span class="token plain">(ctx),</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token property-name function-argument struct-property-name">counter</span><span class="token plain">: </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        });</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">/// Take a cup out of thin air. This is a fast path operation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">take_cup</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">ctx</span><span class="token plain">: &amp;</span><span class="token mut-keyword keyword" style="color:hsl(301, 63%, 40%)">mut</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">TxContext</span><span class="token plain">): </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain"> { </span><span class="token property-name function-argument struct-property-name">id</span><span class="token plain">: </span><span class="token property-value">object</span><span class="token plain">::</span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">new</span><span class="token plain">(ctx), </span><span class="token property-name function-argument struct-property-name">has_coffee</span><span class="token plain">: </span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token plain"> }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">/// Make coffee and pour it into the cup. Requires consensus.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">make_coffee</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">machine</span><span class="token plain">: &amp;</span><span class="token mut-keyword keyword" style="color:hsl(301, 63%, 40%)">mut</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">CoffeeMachine</span><span class="token plain">, </span><span class="token property-name function-argument struct-property-name">cup</span><span class="token plain">: &amp;</span><span class="token mut-keyword keyword" style="color:hsl(301, 63%, 40%)">mut</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        machine.counter = machine.counter + </span><span class="token literals number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        cup.has_coffee = </span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">true</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">/// Drink coffee from the cup. This is a fast path operation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">drink_coffee</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">cup</span><span class="token plain">: &amp;</span><span class="token mut-keyword keyword" style="color:hsl(301, 63%, 40%)">mut</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        cup.has_coffee = </span><span class="token literals boolean" style="color:hsl(35, 99%, 36%)">false</span><span class="token plain">;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:#A0A1A7">/// Put the cup back. This is a fast path operation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token visibility keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token function-keyword keyword" style="color:hsl(301, 63%, 40%)">fun</span><span class="token plain"> </span><span class="token function-name function" style="color:hsl(221, 87%, 60%)">put_back</span><span class="token plain">(</span><span class="token property-name function-argument struct-property-name">cup</span><span class="token plain">: </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain">) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token let-keyword keyword" style="color:hsl(301, 63%, 40%)">let</span><span class="token plain"> </span><span class="token struct-types entity" style="color:#C18401">Cup</span><span class="token plain"> { id, </span><span class="token property-name function-argument struct-property-name">has_coffee</span><span class="token plain">: </span><span class="token property-value">_</span><span class="token plain"> } = cup;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        id.</span><span class="token function-call function" style="color:hsl(221, 87%, 60%)">delete</span><span class="token plain">();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_kl3l" id="special-case-clock">Special Case: Clock<a href="#special-case-clock" class="hash-link" aria-label="Direct link to Special Case: Clock" title="Direct link to Special Case: Clock">​</a></h2>
<p>The <span class="inline-code">Clock</span> object with the reserved address <span class="inline-code">0x6</span> is a special case of a shared object which cannot
be passed by a mutable reference in a regular transaction. An attempt to do so will not succeed, and
the transaction will be rejected. Because of this limitation, the <span class="inline-code">Clock</span> object can only be
accessed immutably, which allows executing transactions in parallel without consensus.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_VdoB thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#frozen-objects" class="table-of-contents__link toc-highlight">Frozen objects</a></li><li><a href="#in-practice" class="table-of-contents__link toc-highlight">In Practice</a></li><li><a href="#special-case-clock" class="table-of-contents__link toc-highlight">Special Case: Clock</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>